<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/lucy.ico"><title>Docker | 彗星文档</title><meta name="description" content="繁星似海 熠熠生辉">
    <link rel="preload" href="/assets/style-CPtAZutf.css" as="style"><link rel="stylesheet" href="/assets/style-CPtAZutf.css">
    <link rel="modulepreload" href="/assets/app-CiSBoDQ3.js"><link rel="modulepreload" href="/assets/docker.html-Br3fXjmj.js">
    <link rel="prefetch" href="/assets/about.html-wV2yNvuu.js" as="script"><link rel="prefetch" href="/assets/index.html-BYnnuSRx.js" as="script"><link rel="prefetch" href="/assets/activiti.html-Cb_jK_iq.js" as="script"><link rel="prefetch" href="/assets/index.html-DdsBykgo.js" as="script"><link rel="prefetch" href="/assets/css.html-CwCx0R0j.js" as="script"><link rel="prefetch" href="/assets/index.html-Ckud_eAb.js" as="script"><link rel="prefetch" href="/assets/datastructure.html-DcWEnLSc.js" as="script"><link rel="prefetch" href="/assets/index.html-CPQzaKp9.js" as="script"><link rel="prefetch" href="/assets/design.html-2FzvzKOk.js" as="script"><link rel="prefetch" href="/assets/index.html-JnI1BS5-.js" as="script"><link rel="prefetch" href="/assets/index.html-DfqN304W.js" as="script"><link rel="prefetch" href="/assets/elk1.html-B3oAIOxw.js" as="script"><link rel="prefetch" href="/assets/index.html-BiyOKAJn.js" as="script"><link rel="prefetch" href="/assets/elk2.html-CnHJFV9b.js" as="script"><link rel="prefetch" href="/assets/index.html-CJDBS2wV.js" as="script"><link rel="prefetch" href="/assets/html.html-D_mk2K_S.js" as="script"><link rel="prefetch" href="/assets/index.html-bWKnOvj3.js" as="script"><link rel="prefetch" href="/assets/abnormal.html-B3EwKTlY.js" as="script"><link rel="prefetch" href="/assets/api.html-BCTmaCdl.js" as="script"><link rel="prefetch" href="/assets/base.html-boeFwZlx.js" as="script"><link rel="prefetch" href="/assets/encapsulation.html-DjUI5-I-.js" as="script"><link rel="prefetch" href="/assets/Inheritance.html-clo1QiSy.js" as="script"><link rel="prefetch" href="/assets/JVM.html-Bq5SIjE7.js" as="script"><link rel="prefetch" href="/assets/other.html-CF2BLrRW.js" as="script"><link rel="prefetch" href="/assets/polymorphism.html-BgaWnHHM.js" as="script"><link rel="prefetch" href="/assets/index.html-CDcVLcEi.js" as="script"><link rel="prefetch" href="/assets/collection.html-i0k9SgMj.js" as="script"><link rel="prefetch" href="/assets/enum.html-DDCsi4Z-.js" as="script"><link rel="prefetch" href="/assets/format.html-CbNdZn9y.js" as="script"><link rel="prefetch" href="/assets/Generics.html-hU5FsvzJ.js" as="script"><link rel="prefetch" href="/assets/iostream.html-Db8Rc5Zy.js" as="script"><link rel="prefetch" href="/assets/NIO.html-DBlS8bNK.js" as="script"><link rel="prefetch" href="/assets/index.html-TBbOdnEb.js" as="script"><link rel="prefetch" href="/assets/reflection.html-CC70fnyj.js" as="script"><link rel="prefetch" href="/assets/socket.html-CLiBd0gb.js" as="script"><link rel="prefetch" href="/assets/thread.html-DMburY4V.js" as="script"><link rel="prefetch" href="/assets/tree.html-COhv9VtZ.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-1CBYwwq-.js" as="script"><link rel="prefetch" href="/assets/index.html-CueiqX14.js" as="script"><link rel="prefetch" href="/assets/js.html-C9_NLBnY.js" as="script"><link rel="prefetch" href="/assets/index.html-C9mPge9P.js" as="script"><link rel="prefetch" href="/assets/log.html-Dh0Da6Hc.js" as="script"><link rel="prefetch" href="/assets/index.html-yLFEegXw.js" as="script"><link rel="prefetch" href="/assets/maven.html-DOdAv6Dm.js" as="script"><link rel="prefetch" href="/assets/index.html-CK3XceL4.js" as="script"><link rel="prefetch" href="/assets/message.html-CdC4TXuL.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Sxc9Up.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-DYWn_zKL.js" as="script"><link rel="prefetch" href="/assets/index.html-BIXAmUnG.js" as="script"><link rel="prefetch" href="/assets/mybatisplus.html-BMO44mtw.js" as="script"><link rel="prefetch" href="/assets/index.html-k_2IJtM3.js" as="script"><link rel="prefetch" href="/assets/mysql-rise.html-CJy7CAtY.js" as="script"><link rel="prefetch" href="/assets/index.html-CpMHL-FV.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-BblyU_z5.js" as="script"><link rel="prefetch" href="/assets/index.html-Bul-465b.js" as="script"><link rel="prefetch" href="/assets/nginx.html-Bf-he9CQ.js" as="script"><link rel="prefetch" href="/assets/index.html-rjZyarl0.js" as="script"><link rel="prefetch" href="/assets/archive1.html-DHoF1GVt.js" as="script"><link rel="prefetch" href="/assets/archive2.html-CaMpKLlM.js" as="script"><link rel="prefetch" href="/assets/article1.html-C7wj3Hnv.js" as="script"><link rel="prefetch" href="/assets/article10.html-BtPemjqh.js" as="script"><link rel="prefetch" href="/assets/article11.html-DBFUN38F.js" as="script"><link rel="prefetch" href="/assets/article12.html-Dzwejx3Q.js" as="script"><link rel="prefetch" href="/assets/article2.html-BYw8UrU9.js" as="script"><link rel="prefetch" href="/assets/article3.html-D7169oIX.js" as="script"><link rel="prefetch" href="/assets/article4.html-DiEowTEu.js" as="script"><link rel="prefetch" href="/assets/article5.html-C1N4DckH.js" as="script"><link rel="prefetch" href="/assets/article6.html-BN6iWA0i.js" as="script"><link rel="prefetch" href="/assets/article7.html-BENraJ5c.js" as="script"><link rel="prefetch" href="/assets/article8.html-DZ7RCxf7.js" as="script"><link rel="prefetch" href="/assets/article9.html-DyuvOqau.js" as="script"><link rel="prefetch" href="/assets/sticky.html-BNm6Btrk.js" as="script"><link rel="prefetch" href="/assets/sticky2.html-BKsRDd3r.js" as="script"><link rel="prefetch" href="/assets/questions.html-reTBywrv.js" as="script"><link rel="prefetch" href="/assets/index.html-NLEllAin.js" as="script"><link rel="prefetch" href="/assets/index.html-Dp-yObq6.js" as="script"><link rel="prefetch" href="/assets/redis.html-B5tiJguG.js" as="script"><link rel="prefetch" href="/assets/rabbitmq.html-HJNn-_qX.js" as="script"><link rel="prefetch" href="/assets/index.html-hRD04cS1.js" as="script"><link rel="prefetch" href="/assets/index.html-bBc3H7qI.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-BBIVwRGw.js" as="script"><link rel="prefetch" href="/assets/buy1.html-6OjYnxlq.js" as="script"><link rel="prefetch" href="/assets/index.html-DazXYzH-.js" as="script"><link rel="prefetch" href="/assets/buy2.html-eI4dxe1r.js" as="script"><link rel="prefetch" href="/assets/index.html-CuQYXhsJ.js" as="script"><link rel="prefetch" href="/assets/buy3.html-C5KdoHEF.js" as="script"><link rel="prefetch" href="/assets/index.html-ClZxc1st.js" as="script"><link rel="prefetch" href="/assets/index.html-BDlpmZ9-.js" as="script"><link rel="prefetch" href="/assets/sort.html-BQs0X5fF.js" as="script"><link rel="prefetch" href="/assets/index.html-CCcFhZPa.js" as="script"><link rel="prefetch" href="/assets/spring.html-B84j2uGJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CJ7G0l91.js" as="script"><link rel="prefetch" href="/assets/springboot.html-6bL431Xo.js" as="script"><link rel="prefetch" href="/assets/index.html-v7I1pr8g.js" as="script"><link rel="prefetch" href="/assets/springcloudalibaba.html-t2WNLzKd.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu1uLPky.js" as="script"><link rel="prefetch" href="/assets/springcloud.html-DYMN4LP5.js" as="script"><link rel="prefetch" href="/assets/index.html-DBwvEGhD.js" as="script"><link rel="prefetch" href="/assets/springdata-jpa.html-B9rkwgnb.js" as="script"><link rel="prefetch" href="/assets/index.html-BSk2K6RS.js" as="script"><link rel="prefetch" href="/assets/springmvc.html-Dj3KfPKx.js" as="script"><link rel="prefetch" href="/assets/index.html-VnyIy73e.js" as="script"><link rel="prefetch" href="/assets/springsecurity.html-pai0Fncc.js" as="script"><link rel="prefetch" href="/assets/index.html-BBwTmuaT.js" as="script"><link rel="prefetch" href="/assets/ssm.html--LJ51UoR.js" as="script"><link rel="prefetch" href="/assets/index.html-ChyaU-q1.js" as="script"><link rel="prefetch" href="/assets/linux.html-x7t9EqDd.js" as="script"><link rel="prefetch" href="/assets/index.html-BDWR3jgj.js" as="script"><link rel="prefetch" href="/assets/git.html-BTH3_mHD.js" as="script"><link rel="prefetch" href="/assets/index.html-BaRVV2Lg.js" as="script"><link rel="prefetch" href="/assets/index.html-DwkhEwFN.js" as="script"><link rel="prefetch" href="/assets/web.html-BQMzalyu.js" as="script"><link rel="prefetch" href="/assets/404.html-BQmZJoxb.js" as="script"><link rel="prefetch" href="/assets/index.html-B3-U4brV.js" as="script"><link rel="prefetch" href="/assets/index.html--TZaAjDD.js" as="script"><link rel="prefetch" href="/assets/index.html-B4yllirZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DPYrzjiL.js" as="script"><link rel="prefetch" href="/assets/index.html-x3X7peOq.js" as="script"><link rel="prefetch" href="/assets/index.html-CdffHRxP.js" as="script"><link rel="prefetch" href="/assets/index.html-D-yEg0ev.js" as="script"><link rel="prefetch" href="/assets/index.html-0u-R21Sg.js" as="script"><link rel="prefetch" href="/assets/index.html-BFtfDIz1.js" as="script"><link rel="prefetch" href="/assets/index.html-DodGeBLO.js" as="script"><link rel="prefetch" href="/assets/index.html-ehzR16_a.js" as="script"><link rel="prefetch" href="/assets/index.html-YpqYXRC0.js" as="script"><link rel="prefetch" href="/assets/index.html-DoLH-5c5.js" as="script"><link rel="prefetch" href="/assets/index.html-BlQrOYeY.js" as="script"><link rel="prefetch" href="/assets/index.html-DhefNKm3.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/comet.png" alt="彗星文档"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">彗星文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">目录 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/docker/docker.html" aria-label="Docker"><!---->Docker<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h1><h2 id="第一章-docker-介绍-运维工具" tabindex="-1"><a class="header-anchor" href="#第一章-docker-介绍-运维工具"><span>第一章 Docker 介绍 - 运维工具</span></a></h2><h3 id="一、docker概述" tabindex="-1"><a class="header-anchor" href="#一、docker概述"><span>一、Docker概述</span></a></h3><p>java--&gt;jar 运行开发环境 mysql5.7</p><p>jar---&gt;生产环境 出错了！ mysql8</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801153532910.4ecac8d4.png" alt="image-20220801153532910"></p><p>Docker 是一个开源的<strong>应用容器引擎</strong>，基于 Go 语言开发。Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p><p><strong>Docker应用场景</strong></p><ul><li>Web 应用的自动化打包和发布</li><li>自动化测试和持续集成、发布</li><li>在服务型环境中部署和调整数据库或其他的后台应用</li></ul><p>使用Docker可以实现开发人员的开发环境、测试人员的测试环境、运维人员的生产环境的一致性。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801152413424.1a6ba897.png" alt="image-20220801152413424"></p><h3 id="二、docker组成部分" tabindex="-1"><a class="header-anchor" href="#二、docker组成部分"><span>二、Docker组成部分</span></a></h3><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801161305417.031d6da6.png" alt="image-20220801161305417"></p><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>Docker 镜像(Images)</td><td>Docker 镜像是用于创建 Docker 容器的模板。 镜像是基于联合文件系统的一种层式结构，由一系列指令一步一步构建出来。</td></tr><tr><td>Docker 容器(Container)</td><td>容器是独立运行的一个或一组应用。镜像相当于类，容器相当于类的实例</td></tr><tr><td>Docker 客户端(Client)</td><td>Docker 客户端通过命令行或者其他工具使用 Docker API 与 Docker 的守护进程通信</td></tr><tr><td>Docker 主机(Host)</td><td>一个物理或者虚拟的机器用于执行 Docker 守护进程和容器。</td></tr><tr><td>Docker守护进程</td><td>是Docker服务器端进程，负责支撑Docker 容器的运行以及镜像的管理。</td></tr><tr><td>Docker 仓库DockerHub (Registry)</td><td>Docker 仓库用来保存镜像，可以理解为代码控制中的代码仓库。 Docker Hub提供了庞大的镜像集合供使用。用户也可以将自己本地的镜像推送到Docker仓库供其他人下载。</td></tr></tbody></table><h3 id="三、导入元动力虚拟机镜像" tabindex="-1"><a class="header-anchor" href="#三、导入元动力虚拟机镜像"><span>三、导入元动力虚拟机镜像</span></a></h3><p>将资源中的虚拟机进行安装（相关的docker容器安装已经安装完毕,注意号段改为200）</p><p>补充：虚拟机：复制了？选<strong>移动</strong>了？</p><p>同户名：root</p><p>密码：ydl666</p><p>ifconfig 显示ip</p><p>导入虚拟机：注意修改相关号段</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801165505855.fc56eea7.png" alt="image-20220801165505855"></p><h4 id="_1、修改vmware-vmnet8" tabindex="-1"><a class="header-anchor" href="#_1、修改vmware-vmnet8"><span>1、修改vmware vmnet8</span></a></h4><p>子网IP:192.168.246.0</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801165549232.1af12984.png" alt="image-20220801165549232"></p><p>DHCP设置：起始结束号段 246</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801165628810.a983ccd5.png" alt="image-20220801165628810"></p><p>NAT设置：网关 192.168.246.2</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801165650845.a017c878.png" alt="image-20220801165650845"></p><h4 id="_2、修改本机vmnet8-地址" tabindex="-1"><a class="header-anchor" href="#_2、修改本机vmnet8-地址"><span>2、修改本机vmnet8 地址</span></a></h4><p>右键网络打开共享中心</p><p>修改适配器设置</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-32-12-image.f586abdb.png" alt="img"></p><ul><li>vnet8网卡 右键 属性</li><li>ipv4协议 修改</li><li>本机IP 192.168.246.1</li><li>网关 192.168.246.2</li><li>dns 192.168.246.2</li></ul><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801170000634.a522f4d5.png" alt="image-20220801170000634"></p><h4 id="_3、启动虚拟机" tabindex="-1"><a class="header-anchor" href="#_3、启动虚拟机"><span>3、启动虚拟机</span></a></h4><p>root</p><p>ydl666</p><h4 id="_4、xshell-crt-finalshell连接到虚拟机" tabindex="-1"><a class="header-anchor" href="#_4、xshell-crt-finalshell连接到虚拟机"><span>4、xshell crt finalshell连接到虚拟机</span></a></h4><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801170133621.cfad42d2.png" alt="image-20220801170133621"></p><p>连接成功！</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801170236614.10369883.png" alt="image-20220801170236614"></p><h3 id="四、docker安装与启动" tabindex="-1"><a class="header-anchor" href="#四、docker安装与启动"><span>四、Docker安装与启动</span></a></h3><p>Docker可以运行在MAC、Windows、CentOS、DEBIAN、UBUNTU等操作系统上，提供社区版和企业版，本课程基于CentOS安装Docker。CentOS6对docker支持的不好，使用docker建议使用CentOS7。</p><p>以下是在CentOS7中安装Docker的步骤：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1、yum 包更新到最新 </span></span>
<span class="line"><span class="token function">sudo</span> yum update </span>
<span class="line"><span class="token comment"># 2、作用：安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</span></span>
<span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2 </span>
<span class="line"><span class="token comment"># 3、 设置yum源 </span></span>
<span class="line"><span class="token comment"># 3.1、方案一：使用ustc的（推荐） </span></span>
<span class="line"><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo </span>
<span class="line"><span class="token comment"># 3.2、方案二：使用阿里云（可能失败） </span></span>
<span class="line"><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo </span>
<span class="line"><span class="token comment"># 4、 安装docker；出现输入的界面都按 y </span></span>
<span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce</span>
<span class="line"><span class="token comment"># 5、 查看docker版本 </span></span>
<span class="line"><span class="token function">docker</span> <span class="token parameter variable">-v</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>设置ustc镜像</strong></p><p>ustc是老牌的linux镜像服务提供者了，还在遥远的ubuntu 5.04版本的时候就在用。ustc的docker镜像加速器速度很快。ustc docker mirror的优势之一就是不需要注册，是真正的公共服务。</p><p>1、 编辑文件/etc/docker/daemon.json</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 执行如下命令： </span>
<span class="line">mkdir /etc/docker </span>
<span class="line">vi /etc/docker/daemon.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在文件中加入下面内容</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">{</span>
<span class="line">&quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn&quot;] </span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Docker启动与停止命令</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 启动docker服务： </span>
<span class="line">systemctl start docker </span>
<span class="line"># 停止docker服务： </span>
<span class="line">systemctl stop docker </span>
<span class="line"># 重启docker服务： </span>
<span class="line">systemctl restart docker </span>
<span class="line"># 查看docker服务状态： </span>
<span class="line">systemctl status docker </span>
<span class="line"># 设置开机启动docker服务： </span>
<span class="line">systemctl enable docker</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801172055300.88ac4313.png" alt="image-20220801172055300"></p><h3 id="五、镜像相关命令" tabindex="-1"><a class="header-anchor" href="#五、镜像相关命令"><span>五、镜像相关命令</span></a></h3><p><strong>镜像</strong>：Docker镜像是由文件系统叠加而成（是一种文件的存储形式）；是docker中的核心概念，可以认为镜像就是对某些运行环境或者软件打的包，用户可以从docker仓库中下载基础镜像到本地，比如开发人员可以从docker仓库拉取（下载）一个只包含centos7系统的基础镜像，然后在这个镜像中安装jdk、mysql、Tomcat和自己开发的应用，最后将这些环境打成一个新的镜像。开发人员将这个新的镜像提交给测试人员进行测试，测试人员只需要在测试环境下运行这个镜像就可以了，这样就可以保证开发人员的环境和测试人员的环境完全一致。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220801154638733.b17c9634.png" alt="image-20220801154638733"></p><h4 id="_1、查看本地镜像" tabindex="-1"><a class="header-anchor" href="#_1、查看本地镜像"><span>1、查看本地镜像</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 查看镜像可以使用如下命令： </span>
<span class="line">docker images</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802004512134.e251414d.png" alt="image-20220802004512134"></p><p>REPOSITORY：镜像名称</p><p>TAG：镜像标签</p><p>IMAGE ID：镜像ID</p><p>CREATED：镜像的创建日期</p><p>SIZE：镜像大小</p><h4 id="_2、搜索镜像" tabindex="-1"><a class="header-anchor" href="#_2、搜索镜像"><span>2、搜索镜像</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 如果你需要从网络中查找需要的镜像，可以通过以下命令搜索 </span>
<span class="line">docker search 镜像名称</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802004640991.11e1bf8d.png" alt="image-20220802004640991"></p><p>NAME：镜像名称</p><p>DESCRIPTION：镜像描述</p><p>STARS：用户评价，反应一个镜像的受欢迎程度</p><p>OFFICIAL：是否官方</p><p>AUTOMATED：自动构建，表示该镜像由Docker Hub自动构建流程创建的</p><h4 id="_3、拉取镜像" tabindex="-1"><a class="header-anchor" href="#_3、拉取镜像"><span>3、拉取镜像</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 拉取镜像就是从Docker仓库下载镜像到本地，镜像名称格式为 名称:版本号，如果版本号不指定则是最新的版本 命令如下： d</span>
<span class="line">ocker pull 镜像名称 </span>
<span class="line"># 如拉取centos 7； </span>
<span class="line">docker pull centos:7</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802005024899.7a43f24d.png" alt="image-20220802005024899"></p><h4 id="_4、删除镜像" tabindex="-1"><a class="header-anchor" href="#_4、删除镜像"><span>4、删除镜像</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 可以按照镜像id删除镜像，命令如下： </span>
<span class="line">docker rmi 镜像id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802005140488.4384e8ef.png" alt="image-20220802005140488"></p><p>1、 docker rmi $IMAGE_ID：删除指定镜像</p><p>2、 docker rmi <code>docker images -q</code>：删除所有镜像</p><h3 id="六、容器相关命令" tabindex="-1"><a class="header-anchor" href="#六、容器相关命令"><span>六、容器相关命令</span></a></h3><p>容器，也是docker中的核心概念，容器是由镜像运行产生的运行实例。镜像和容器的关系，就如同Java语言中类和对象的关系。</p><h4 id="_1、查看容器" tabindex="-1"><a class="header-anchor" href="#_1、查看容器"><span>1、查看容器</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">查看正在运行的容器使用命令：</span>
<span class="line">docker ps</span>
<span class="line">查看所有容器使用命令：</span>
<span class="line">docker ps -a</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802005933035.dca1923f.png" alt="image-20220802005933035"></p><h4 id="_2、创建并启动容器" tabindex="-1"><a class="header-anchor" href="#_2、创建并启动容器"><span>2、创建并启动容器</span></a></h4><p>可以基于已有的镜像来创建和启动容器，创建与启动容器使用命令：docker run</p><p><strong>参数说明</strong>：</p><ul><li>-i：表示运行容器</li><li>-t：表示容器启动后会进入其命令行。加入这两个参数后，容器创建就能登录进去。即分配一个伪终端。</li><li>-d：在run后面加上-d参数,则会创建一个守护式容器在后台运行（这样创建容器后不会自动登录容器，如果只加-i -t两个参数，创建后就会自动进去容器）。</li><li>--name :为创建的容器命名。</li><li>-v：表示目录映射关系（前者是宿主机目录，后者是映射到宿主机上的目录），可以使用多个－v做多个目录或文件映射。注意：最好做目录映射，在宿主机上做修改，然后共享到容器上。</li><li>-p：表示端口映射，前者是宿主机端口，后者是容器内的映射端口。可以使用多个-p做多个端口映射</li></ul><p><strong>1</strong>）交互式容器</p><p>以<strong>交互式</strong>方式创建并启动容器，启动完成后，直接进入当前容器。使用exit命令退出容器。需要注意的是以此种方式启动容器，如果退出容器，则容器会进入<strong>停止</strong>状态。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 先拉取一个镜像；这一步不是每次启动容器都要做的，而是因为前面我们删除了镜像，无镜像可用所以才再拉取一个 </span>
<span class="line">docker pull centos:7 </span>
<span class="line">#创建并启动名称为 mycentos7 的交互式容器；下面指令中的镜像名称 centos:7 也可以使用镜像id </span>
<span class="line">docker run -it --name=ydlcentos1 centos:7 /bin/bash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802010948873.0da1db5b.png" alt="image-20220802010948873"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802011046622.c8b4b7a2.png" alt="image-20220802011046622"></p><p><strong>2</strong>）守护式容器</p><p>创建一个守护式容器；如果对于一个需要长期运行的容器来说，我们可以创建一个守护式容器。命令如下（容器名称不能重复）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">#创建并启动守护式容器 </span>
<span class="line">docker run -di --name=ydlcentos2 centos:7 </span>
<span class="line">#登录进入容器命令为：docker exec -it container_name (或者 container_id) /bin/bash（exit退出 时，容器不会停止） </span>
<span class="line">docker exec -it ydlcentos2 /bin/bash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802011229343.1e39ca1b.png" alt="image-20220802011229343"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802011349832.2378bfe5.png" alt="image-20220802011349832"></p><h4 id="_3、停止并启动容器" tabindex="-1"><a class="header-anchor" href="#_3、停止并启动容器"><span>3、停止并启动容器</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 停止正在运行的容器：docker stop 容器名称或者ID </span>
<span class="line">docker stop ydlcentos2 </span>
<span class="line"># 启动已运行过的容器：docker start 容器名称或者ID </span>
<span class="line">docker start ydlcentos2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802011603272.13c2326b.png" alt="image-20220802011603272"></p><h4 id="_4、文件拷贝" tabindex="-1"><a class="header-anchor" href="#_4、文件拷贝"><span>4、文件拷贝</span></a></h4><p>注意：容器在停止状态下也可以完成文件的拷贝</p><p>将linux宿主机中的文件拷贝到容器内可以使用命令：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># docker cp 需要拷贝的文件或目录 容器名称:容器目录 </span>
<span class="line"></span>
<span class="line"># 创建一个文件abc.txt </span>
<span class="line">touch itlils.txt </span>
<span class="line"></span>
<span class="line"># 复制abc.txt到mycentos2的容器的 / 目录下 </span>
<span class="line">docker cp itlils.txt ydlcentos2:/root</span>
<span class="line"></span>
<span class="line"># 进入mycentos2容器 </span>
<span class="line">docker exec -it ydlcentos2 /bin/bash </span>
<span class="line"></span>
<span class="line"># 查看容器 / 目录下文件 </span>
<span class="line">ll</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802012018175.aef89a53.png" alt="image-20220802012018175"></p><p>将文件从容器内拷贝出来到linux宿主机使用命令：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># docker cp 容器名称:容器目录 需要拷贝的文件或目录</span>
<span class="line"></span>
<span class="line">#进入容器后创建文件cba.txt </span>
<span class="line">touch itnanls.log </span>
<span class="line"></span>
<span class="line"># 退出容器 </span>
<span class="line">exit </span>
<span class="line"></span>
<span class="line"># 在Linux宿主机器执行复制；将容器mycentos2的/cba.txt文件复制到宿主机器的/root目录下 </span>
<span class="line">docker cp ydlcentos2:/root/itnanls.log /root</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802012150020.1c4576f5.png" alt="image-20220802012150020"></p><h4 id="_5、目录挂载" tabindex="-1"><a class="header-anchor" href="#_5、目录挂载"><span>5、目录挂载</span></a></h4><p>可以在创建容器的时候，将宿主机的目录与容器内的目录进行映射，这样我们就可以通过修改宿主机某个目录的文件从而去影响容器。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802012336743.c39587ed.png" alt="image-20220802012336743"></p><p>创建容器时添加-v参数，后边为宿主机目录:容器目录，例如： docker run -di -v /root/binlog:/root/binlog --name=ydlcentos3 centos:7</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 创建linux宿主机器要挂载的目录 </span>
<span class="line">mkdir /root/binlog </span>
<span class="line"></span>
<span class="line"># 创建并启动容器ydlcentos3 ,并挂载linux中的/root/binlog 目录到容器的/root/binlog ；也就是在 linux中的/root/binlog 中操作相当于对容器相应目录操作 </span>
<span class="line">docker run -di -v /root/binlog:/root/binlog --name=ydlcentos3 centos:7</span>
<span class="line"></span>
<span class="line"># 在linux下创建文件 </span>
<span class="line">touch /root/binlog/mysql.log </span>
<span class="line"></span>
<span class="line"># 进入容器 docker exec -it ydlcentos3 /bin/bash</span>
<span class="line"></span>
<span class="line"># 在容器中查看目录中是否有对应文件def.txt </span>
<span class="line">ll /root/binlog</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802012804347.2f9cc43d.png" alt="image-20220802012804347"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802012812843.ae0981a9.png" alt="image-20220802012812843"></p><p>注意：如果你共享的是多级的目录，可能会出现权限不足的提示。 这是因为CentOS7中的安全模块selinux把权限禁掉了，需要添加参数 --privileged=true 来解决挂载的目录没有权限的问题。</p><h4 id="_6、查看容器ip" tabindex="-1"><a class="header-anchor" href="#_6、查看容器ip"><span>6、查看容器ip</span></a></h4><p>可以通过以下命令查看容器运行的各种数据 docker inspect 容器名称（容器ID）</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 在linux宿主机下查看 mycentos3 的ip </span>
<span class="line">docker inspect ydlcentos3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>容器之间在一个局域网内，linux宿主机器可以与容器进行通信；但是外部的物理机笔记本是不能与容器直接通信的，如果需要则需要通过宿主机器端口的代理。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802013027238.fec911e8.png" alt="image-20220802013027238"></p><h4 id="_7、删除容器" tabindex="-1"><a class="header-anchor" href="#_7、删除容器"><span>7、删除容器</span></a></h4><p>删除指定的容器：docker rm 容器名称（容器ID） 删除所有容器：docker rm <code>docker ps -a -q</code></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 删除容器 </span>
<span class="line">docker rm ydlcentos3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果容器是运行状态则删除失败，需要停止容器才能删除</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802013334950.24260740.png" alt="image-20220802013334950"></p><h2 id="第二章-部署相关软件" tabindex="-1"><a class="header-anchor" href="#第二章-部署相关软件"><span>第二章 部署相关软件</span></a></h2><h3 id="一、mysql容器部署" tabindex="-1"><a class="header-anchor" href="#一、mysql容器部署"><span>一、MySQL容器部署</span></a></h3><p>1.搜索mysql镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> search mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802013901040.1c677f13.png" alt="image-20220802013901040"></p><p>2.拉取mysql镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull mysql:5.7</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3.创建容器，设置端口映射、目录映射</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 在/root目录下创建mysql目录用于存储mysql数据信息</span></span>
<span class="line"><span class="token function">mkdir</span> /root/mysql</span>
<span class="line"><span class="token builtin class-name">cd</span> /root/mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-id</span> <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token number">3307</span>:3306 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">--name</span><span class="token operator">=</span>ydl_mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql/conf:/etc/mysql/conf.d <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql/logs:/logs <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/mysql/data:/var/lib/mysql <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span></span>
<span class="line">mysql:5.7</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数说明： <ul><li><strong>-p 3307:3306</strong>：将容器的 3306 端口映射到宿主机的 3307 端口。</li><li><strong>-v $PWD/conf:/etc/mysql/conf.d</strong>：将主机当前目录下的 conf/my.cnf 挂载到容器的 /etc/mysql/my.cnf。配置目录</li><li><strong>-v $PWD/logs:/logs</strong>：将主机当前目录下的 logs 目录挂载到容器的 /logs。日志目录</li><li><strong>-v $PWD/data:/var/lib/mysql</strong> ：将主机当前目录下的data目录挂载到容器的 /var/lib/mysql 。数据目录</li><li>**-e MYSQL_ROOT_PASSWORD=123456：**初始化 root 用户的密码。</li></ul></li></ul><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802014335044.ef0c1212.png" alt="image-20220802014335044"></p><p>4.进入容器，操作mysql</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> ydl_mysql /bin/bash</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802014458508.11796e6e.png" alt="image-20220802014458508"></p><p>5.使用外部机器连接容器中的mysql</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802014616050.536c06a6.png" alt="image-20220802014616050"></p><h3 id="二、tomcat容器部署" tabindex="-1"><a class="header-anchor" href="#二、tomcat容器部署"><span>二、Tomcat容器部署</span></a></h3><p>1.搜索tomcat镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> search tomcat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802014907657.0e4f2da7.png" alt="image-20220802014907657"></p><p>2.拉取tomcat镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull tomcat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802014958141.e8fde620.png" alt="image-20220802014958141"></p><p>3.创建容器，设置端口映射、目录映射</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 在/root目录下创建tomcat目录用于存储tomcat数据信息</span></span>
<span class="line"><span class="token function">mkdir</span> /root/tomcat</span>
<span class="line"><span class="token builtin class-name">cd</span> /root/tomcat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-id</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>ydl_tomcat <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token number">8081</span>:8080 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/tomcat:/usr/local/tomcat/webapps <span class="token punctuation">\</span></span>
<span class="line">tomcat </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>参数说明：</p><ul><li><p>**-p 8080:8080：**将容器的8080端口映射到主机的8080端口</p><p>**-v $PWD:/usr/local/tomcat/webapps：**将主机中当前目录挂载到容器的webapps</p></li></ul></li></ul><ol><li><p>使用外部机器访问tomcat</p><p>http://192.168.246.128:8081/</p></li></ol><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802015156699.4d79e120.png" alt="image-20220802015156699"></p><p><strong>小结</strong>：</p><blockquote><p>上传项目文件可以使用容器的目录挂载功能，外部访问可以使用端口映射</p></blockquote><h3 id="三、nginx容器部署" tabindex="-1"><a class="header-anchor" href="#三、nginx容器部署"><span>三、Nginx容器部署</span></a></h3><p>1.搜索nginx镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> search nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802015500236.e63a8b02.png" alt="image-20220802015500236"></p><p>2.拉取nginx镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802015611869.a52d72b8.png" alt="image-20220802015611869"></p><p>3.创建容器，设置端口映射、目录映射</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 在/root目录下创建nginx目录用于存储nginx数据信息</span></span>
<span class="line"><span class="token function">mkdir</span> /root/nginx</span>
<span class="line"><span class="token builtin class-name">cd</span> /root/nginx</span>
<span class="line"><span class="token function">mkdir</span> conf</span>
<span class="line"><span class="token builtin class-name">cd</span> conf</span>
<span class="line"><span class="token comment"># 在~/nginx/conf/下创建nginx.conf文件,粘贴下面内容</span></span>
<span class="line"><span class="token function">vim</span> nginx.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">user  nginx<span class="token punctuation">;</span></span>
<span class="line">worker_processes  <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span></span>
<span class="line">pid        /var/run/nginx.pid<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">events <span class="token punctuation">{</span></span>
<span class="line">    worker_connections  <span class="token number">1024</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">http <span class="token punctuation">{</span></span>
<span class="line">    include       /etc/nginx/mime.types<span class="token punctuation">;</span></span>
<span class="line">    default_type  application/octet-stream<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    log_format  main  <span class="token string">&#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line">                      <span class="token string">&#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line">                      <span class="token string">&#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    sendfile        on<span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">#tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line">    keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">#gzip  on;</span></span>
<span class="line"></span>
<span class="line">    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-id</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>ydl_nginx <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/nginx/logs:/var/log/nginx <span class="token punctuation">\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /root/nginx/html:/usr/share/nginx/html <span class="token punctuation">\</span></span>
<span class="line">nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数说明： <ul><li><strong>-p 80:80</strong>：将容器的 80端口映射到宿主机的 80 端口。</li><li><strong>-v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf</strong>：将主机当前目录下的 /conf/nginx.conf 挂载到容器的 :/etc/nginx/nginx.conf。配置目录</li><li><strong>-v $PWD/logs:/var/log/nginx</strong>：将主机当前目录下的 logs 目录挂载到容器的/var/log/nginx。日志目录</li></ul></li></ul><p>4.使用外部机器访问nginx</p><p>http://192.168.246.128/</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802015832349.a5c12ff5.png" alt="image-20220802015832349"></p><p><strong>小结</strong>：</p><blockquote><p>如果被占用了80端口，那么在指定映射的时候可以改变宿主机的端口映射，在访问时也需要带上端口号。</p></blockquote><h3 id="四、redis容器部署" tabindex="-1"><a class="header-anchor" href="#四、redis容器部署"><span>四、Redis容器部署</span></a></h3><p>1.搜索redis镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> search redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802020222446.3ed0df45.png" alt="image-20220802020222446"></p><p>2.拉取redis镜像</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull redis:5.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802020238021.09b0568e.png" alt="image-20220802020238021"></p><p>3.创建容器，设置端口映射</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-id</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>ydl_redis <span class="token parameter variable">-p</span> <span class="token number">6380</span>:6379 redis:5.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>4.使用外部机器连接redis</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./redis-cli.exe <span class="token parameter variable">-h</span> <span class="token number">192.168</span>.246.128 <span class="token parameter variable">-p</span> <span class="token number">6380</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802020431703.b165c222.png" alt="image-20220802020431703"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802020540154.6a37b55e.png" alt="image-20220802020540154"></p><h3 id="五、docker-compose简介-安装" tabindex="-1"><a class="header-anchor" href="#五、docker-compose简介-安装"><span>五、docker-compose简介&amp;安装</span></a></h3><h4 id="_1、-概念" tabindex="-1"><a class="header-anchor" href="#_1、-概念"><span>1、 概念</span></a></h4><p>Compose项目是Docker官方的开源项目，负责实现对Docker容器集群的快速编排。它<strong>是一个定义和运行多容器的</strong>docker应用工具。使用compose，你能通过YMAL文件配置你自己的服务，然后通过一个命令，你能使用配置文件创建和运行所有的服务。</p><h4 id="_2、-组成" tabindex="-1"><a class="header-anchor" href="#_2、-组成"><span>2、 组成</span></a></h4><p>Docker-Compose将所管理的容器分为三层，分别是工程（project），服务（service）以及容器（container）。Docker-Compose运行目录下的所有文件（docker-compose.yml，extends文件或环境变量文件等）组成一个工程，若无特殊指定工程名即为当前目录名。一个工程当中可包含多个服务，每个服务中定义了容器运行的镜像，参数，依赖。一个服务当中可包括多个容器实例。</p><ul><li><strong>服务（service）</strong>：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。每个服务都有自己的名字、使用的镜像、挂载的数据卷、所属的网络、依赖哪些其他服务等等，即以容器为粒度，用户需要Compose所完成的任务。</li><li><strong>项目（project）</strong>：由一组关联的应用容器组成的一个完成业务单元，在docker-compose.yml中定义。即是Compose的一个配置文件可以解析为一个项目，Compose通过分析指定配置文件，得出配置文件所需完成的所有容器管理与部署操作。</li></ul><p>Docker-Compose的工程配置文件默认为docker-compose.yml，可通过环境变量COMPOSE_FILE或-f参数自定义配置文件，其定义了多个有依赖关系的服务及每个服务运行的容器。</p><p>使用一个Dockerfifile模板文件，可以让用户很方便的定义一个单独的应用容器。在工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况。例如：要部署一个Web项目，除了Web服务容器，往往还需要再加上后端的数据库服务容器，甚至还包括负载均衡容器等。</p><h4 id="_3、安装" tabindex="-1"><a class="header-anchor" href="#_3、安装"><span>3、安装</span></a></h4><p>Compose目前已经完全支持Linux、Mac OS和Windows，在我们安装Compose之前，需要先安装Docker。下面我们以编译好的二进制包方式安装在Linux系统中。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">curl -L &quot;https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose </span>
<span class="line"></span>
<span class="line"># 设置文件可执行权限 </span>
<span class="line">chmod +x /usr/local/bin/docker-compose </span>
<span class="line"></span>
<span class="line"># 查看版本信息 </span>
<span class="line">docker-compose -version</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、卸载" tabindex="-1"><a class="header-anchor" href="#_4、卸载"><span>4、卸载</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 二进制包方式安装的，删除二进制文件即可 </span>
<span class="line">rm /usr/local/bin/docker-compose</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5、常用命令参考" tabindex="-1"><a class="header-anchor" href="#_5、常用命令参考"><span>5、常用命令参考</span></a></h4><p>使用Compose前，可以通过执行 docker-compose --help|-h 来查看Compose基本命令用法。</p><p>也可以通过执行 docker-compose [COMMAND] --help 或者 docker-compose --help [COMMAND] 来查看某个具体的使用格式。</p><p>可以知道Compose命令的基本的使用格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose [-f 参数...] [options] [COMMAND] [ARGS...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>命令选项如下：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-f，–file FILE指定使用的Compose模板文件，默认为docker-compose.yml，可以多次指定。 </span>
<span class="line">-p，–project-name NAME指定项目名称，默认将使用所在目录名称作为项目名。 </span>
<span class="line">-x-network-driver 使用Docker的可拔插网络后端特性（需要Docker 1.9 及以后版本） </span>
<span class="line">-x-network-driver DRIVER指定网络后端的驱动，默认为bridge（需要Docker 1.9 及以后版本） </span>
<span class="line">-verbose输出更多调试信息 </span>
<span class="line">-v，-version打印版本并退出</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Docker Compose</strong>常用命令列表如下：</p><table><thead><tr><th><strong>命令</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>build</td><td>构建项目中的服务容器</td></tr><tr><td>help</td><td>获得一个命令的帮助</td></tr><tr><td>kill</td><td>通过发送SIGKILL信号来强制停止服务容器</td></tr><tr><td>confifig</td><td>验证和查看compose文件配置</td></tr><tr><td>create</td><td>为服务创建容器。只是单纯的create，还需要使用start启动compose</td></tr><tr><td>down</td><td>停止并删除容器，网络，镜像和数据卷</td></tr><tr><td>exec</td><td>在运行的容器中执行一个命令</td></tr><tr><td>logs</td><td>查看服务容器的输出</td></tr><tr><td>pause</td><td>暂停一个服务容器</td></tr><tr><td>port</td><td>打印某个容器端口所映射的公共端口</td></tr><tr><td>ps</td><td>列出项目中目前的所有容器</td></tr><tr><td>pull</td><td>拉取服务依赖的镜像</td></tr><tr><td>push</td><td>推送服务镜像</td></tr><tr><td>restart</td><td>重启项目中的服务</td></tr><tr><td>rm</td><td>删除所有（停止状态的）服务容器</td></tr><tr><td>run</td><td>在指定服务上执行一个命令</td></tr><tr><td>scale</td><td>设置指定服务运行的容器个数</td></tr><tr><td>start</td><td>启动已经存在的服务容器</td></tr><tr><td>stop</td><td>停止已经处于运行状态的容器，但不删除它</td></tr><tr><td>top</td><td>显示运行的进程</td></tr><tr><td>unpause</td><td>恢复处于暂停状态中的服务</td></tr><tr><td>up</td><td>自动完成包括构建镜像、创建服务、启动服务并关闭关联服务相关容器的一些列操作</td></tr><tr><td>version</td><td>打印版本信息</td></tr></tbody></table><p>1.up</p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose up [options] [--scale SERVICE=NUM...] [SERVICE...] </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>up命令十分强大，它尝试自动完成包括构建镜像，（重新）创建服务，启动服务，并关联服务相关容器的一些列操作。链接的服务都将会被自动启动，除非已经处于运行状态。</p><p>多数情况下我们可以直接通过该命令来启动一个项目。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-d 在后台运行服务容器 </span>
<span class="line">–no-color 不使用颜色来区分不同的服务的控制输出 </span>
<span class="line">–no-deps 不启动服务所链接的容器 </span>
<span class="line">–force-recreate 强制重新创建容器，不能与–no-recreate同时使用 </span>
<span class="line">–no-recreate 如果容器已经存在，则不重新创建，不能与–force-recreate同时使用 </span>
<span class="line">–no-build 不自动构建缺失的服务镜像 </span>
<span class="line">–build 在启动容器前构建服务镜像 </span>
<span class="line">–abort-on-container-exit 停止所有容器，如果任何一个容器被停止，不能与-d同时使用 </span>
<span class="line">-t, --timeout TIMEOUT 停止容器时候的超时（默认为10秒） </span>
<span class="line">–remove-orphans 删除服务中没有在compose文件中定义的容器 </span>
<span class="line">–scale SERVICE=NUM 设置服务运行容器的个数，将覆盖在compose中通过scale指定的参数</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. ps</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose ps [options] [SERVICE...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>列出项目中目前的所有容器。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-q 只打印容器的ID信息</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3. stop</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose stop [options] [SERVICE...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>停止已经处于运行状态的容器，但不删除它。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-t, --timeout TIMEOUT 停止容器时候的超时（默认为10秒）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4. down</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose down [options]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>停止和删除容器、网络、卷、镜像，这些内容是通过docker-compose up命令创建的. 默认值删除 容器 网络，可以通过指定 rmi 、volumes参数删除镜像和卷。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">–rmi type 删除镜像，类型必须是: ‘all’: 删除compose文件中定义的所以镜像；‘local’: 删除镜像名为空的 镜像</span>
<span class="line">-v, --volumes 删除已经在compose文件中定义的和匿名的附在容器上的数据卷 </span>
<span class="line">–remove-orphans 删除服务中没有在compose中定义的容器</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5. restart</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose restart [options] [SERVICE...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>重启项目中的服务。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-t, --timeout TIMEOUT 指定重启前停止容器的超时（默认为10秒）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>6. rm</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose rm [options] [SERVICE...] 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>删除所有（停止状态的）服务容器。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">–f, --force 强制直接删除，包括非停止状态的容器 </span>
<span class="line">-v 删除容器所挂载的数据卷</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7. start</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose start [SERVICE...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动已经存在的服务容器。</p><p><strong>8. run</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose run [options] [-v VOLUME...] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在指定服务上执行一个命令。</p><p>例如：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose run ubuntu ping www.baidu.com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将会执行一个ubuntu容器，并执行ping www.baidu.com命令。</p><p>默认情况下，如果存在关联，则所有关联的服务将会自动被启动，除非这些服务已经在运行中。该命令类似于启动容</p><p>器后运行指定的命令，相关卷、链接等都会按照配置自动创建。有两个不同点：</p><ol><li>给定命令将会覆盖原有的自动运行命令</li><li>不会自动创建端口，以避免冲突</li></ol><p>如果不希望自动启动关联的容器，可以使用–no-deps选项，例如：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose run --no-deps web</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将不会启动web容器关联的其他容器</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-d 在后台运行服务容器 </span>
<span class="line">–name NAME 为容器指定一个名字 </span>
<span class="line">–entrypoint CMD 覆盖默认的容器启动指令 </span>
<span class="line">-e KEY=VAL 设置环境变量值，可多次使用选项来设置多个环境变量</span>
<span class="line">-u, --user=&quot;&quot; 指定运行容器的用户名或者uid</span>
<span class="line">–no-deps 不自动启动管理的服务容器 </span>
<span class="line">–rm 运行命令后自动删除容器，d模式下将忽略 </span>
<span class="line">-p, --publish=[] 映射容器端口到本地主机 </span>
<span class="line">–service-ports 配置服务端口并映射到本地主机 </span>
<span class="line">-v, --volume=[] 绑定一个数据卷，默认为空 </span>
<span class="line">-T 不分配伪tty，意味着依赖tty的指令将无法运行 </span>
<span class="line">-w, --workdir=&quot;&quot; 为容器指定默认工作目录</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>9. confifig</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose config [options]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>验证并查看compose文件配置。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">–resolve-image-digests 将镜像标签标记为摘要 </span>
<span class="line">-q, --quiet 只验证配置，不输出。 当配置正确时，不输出任何内容，当文件配置错误，输出错误信息 </span>
<span class="line">–services 打印服务名，一行一个 </span>
<span class="line">–volumes 打印数据卷名，一行一个</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>10. kill</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose kill [options] [SERVICE...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过发送SIGKILL信号来强制停止服务容器。 支持通过-s参数来指定发送的信号，例如：通过如下指令发送SIGINT信号：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose kill -s SIGINT</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>11. create</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose create [options] [SERVICE...] 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>为服务创建容器.只是单纯的create，还需要使用start启动compose。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">–force-recreate 重新创建容器，即使它的配置和镜像没有改变，不兼容–no-recreate参数 </span>
<span class="line">–no-recreate 如果容器已经存在，不需要重新创建. 不兼容–force-recreate参数 </span>
<span class="line">–no-build 不创建镜像，即使缺失 </span>
<span class="line">–build 创建容器前，生成镜像</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>12. exec</strong></p><p>格式为：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker-compose exec [options] SERVICE COMMAND [ARGS...]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>与 docker exec 命令功能相同，可以通过service name登陆到容器中。</p><p>选项包括：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">-d 分离模式，后台运行命令. </span>
<span class="line">–privileged 获取特权. </span>
<span class="line">–user USER 指定运行的用户. </span>
<span class="line">-T 禁用分配TTY. By default docker-compose exec分配 a TTY. </span>
<span class="line">–index=index 当一个服务拥有多个容器时，可通过该参数登陆到该服务下的任何服务，例如：docker-compose exec --index=1 web /bin/bash ，web服务中包含多个容器</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="六、compose模版文件" tabindex="-1"><a class="header-anchor" href="#六、compose模版文件"><span>六、Compose模版文件</span></a></h3><p>模板文件是使用Compose的核心，涉及的指令关键字也比较多，大部分指令与 docker run 相关参数的含义都是类似的。默认的模板文件名称为docker-compose.yml，格式为YAML格式。</p><p>比如一个Compose模板文件：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">version: &quot;2&quot; </span>
<span class="line">	services: </span>
<span class="line">		web:</span>
<span class="line">			images: nginx </span>
<span class="line">			ports: -&quot;8080:80&quot; </span>
<span class="line">			volumes: - /usr/local/abc:/usr/local/cba </span>
<span class="line">#volumes: </span>
<span class="line">#networks:</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker Compose的模板文件主要分为3个区域，如下：</p><ul><li>services <ul><li>服务，在它下面可以定义应用需要的一些服务，每个服务都有自己的名字、使用的镜像、挂载的数据卷、所属的网络、依赖哪些其他服务等等。</li></ul></li><li>volumes <ul><li>数据卷，在它下面可以定义的数据卷（名字等等），然后挂载到不同的服务下去使用。</li></ul></li><li>networks <ul><li>应用的网络，在它下面可以定义应用的名字、使用的网络类型等等。</li></ul></li></ul><table><thead><tr><th><strong>指令</strong></th><th><strong>功能</strong></th></tr></thead><tbody><tr><td>build</td><td>指定服务镜像Dockerfifile所在路径</td></tr><tr><td>cap_dd，cap_drop</td><td>指定容器的内核能力（capacity）分配</td></tr><tr><td>command</td><td>覆盖容器启动后默认执行的命令</td></tr><tr><td>cgroup_parent</td><td>指定父cgroup组，意味着将基础该组的资源限制</td></tr><tr><td>container_name</td><td>指定容器名称。默认将会使用项目名称服务名称序号这样的格式</td></tr><tr><td>devices</td><td>指定设置映射关系</td></tr><tr><td>dns</td><td>自定义DNS服务器。可以是一个值，也可以是一个列表</td></tr><tr><td>dns_search</td><td>配置DNS搜索域。可以是一个值，也可以是一个列表</td></tr><tr><td>dockerfifile</td><td>指定额外编译镜像的Dockerfifile文件，可以通过该指令来指定</td></tr><tr><td>env_fifile</td><td>从文件中获取环境变量，可以为单独的文件路径或列表</td></tr><tr><td>environment</td><td>设置环境变量，可以使用数组或字典两种格式</td></tr><tr><td>expose</td><td>暴露端口</td></tr><tr><td>external_links</td><td>链接到docker-compose.yml外部的容器，甚至可以是非Compose管理的外部容器</td></tr><tr><td>extra_hosts</td><td>指定额外的host名称映射信息</td></tr><tr><td>image</td><td>指定为镜像名称或镜像ID。如果镜像在本地不存在，Compose将会尝试拉取这个镜像</td></tr><tr><td>labels</td><td>指定服务镜像Dockerfifile所在路径</td></tr><tr><td>links</td><td>链接到其他服务中的容器</td></tr><tr><td>log_driver</td><td>指定日志驱动类型，类似于Docker中的–log-driver参数。目前支持三种日志驱动类型：log_driver:“json-fifile”、log_driver:“syslog”、log_driver:“none”</td></tr><tr><td>log_opt</td><td>日志驱动的相关参数</td></tr><tr><td>net</td><td>设置网络模式。参数类似于docker clinet的–net参数一样</td></tr><tr><td>pid</td><td>跟主机系统共享进程命名空间。打开该选项的容器之间，以及容器和宿主机系统之间可以通过进程ID来相互访问和操作</td></tr><tr><td>ports</td><td>暴露端口信息</td></tr><tr><td>security_opt</td><td>指定容器模板标签（label）机制的默认属性（如用户、角色、类型、级别等）</td></tr><tr><td>ulimits</td><td>指定容器的ulimits限制值</td></tr><tr><td>volumes</td><td>数据卷所挂载路径设置。可以设置宿主机路径（HOST:CONTAINER）或加上访问模式(HOST:CONTAINER:ro）</td></tr></tbody></table><h3 id="七、compose应用" tabindex="-1"><a class="header-anchor" href="#七、compose应用"><span>七、Compose应用</span></a></h3><p><strong>需求</strong>：编写compose模版文件，实现同时启动tomcat、mysql和redis容器。</p><h4 id="_1、-编写模版文件" tabindex="-1"><a class="header-anchor" href="#_1、-编写模版文件"><span>1、 编写模版文件</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 创建文件夹</span>
<span class="line">mkdir -p /usr/local/mycompose </span>
<span class="line">#进入文件夹 </span>
<span class="line">cd /usr/local/mycompose </span>
<span class="line">#创建 docker-compose.yml文件；内容如下 </span>
<span class="line">vi docker-compose.yml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker-compose.yml文件内容如下（文件内容请从 资料\配置文件\docker-compose.yml 复制）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">version: &#39;3&#39;</span>
<span class="line">services:</span>
<span class="line">  redis1:</span>
<span class="line">    image: redis</span>
<span class="line">    ports:</span>
<span class="line">      - &quot;6379:6379&quot;</span>
<span class="line">    container_name: &quot;redis1&quot;</span>
<span class="line">    networks: </span>
<span class="line">      - dev</span>
<span class="line">  mysql1:</span>
<span class="line">    image: centos/mysql-57-centos7</span>
<span class="line">    environment:</span>
<span class="line">      MYSQL_ROOT_PASSWORD: &quot;root&quot;</span>
<span class="line">    ports: </span>
<span class="line">      - &quot;3306:3306&quot;</span>
<span class="line">    container_name: &quot;mysql1&quot;</span>
<span class="line">    networks: </span>
<span class="line">      - dev</span>
<span class="line">  web1:</span>
<span class="line">    image: tomcat</span>
<span class="line">    ports: </span>
<span class="line">      - &quot;9090:8080&quot;</span>
<span class="line">    container_name: &quot;web1&quot;</span>
<span class="line">    networks: </span>
<span class="line">      - dev</span>
<span class="line">      - pro</span>
<span class="line">networks:</span>
<span class="line">  dev:</span>
<span class="line">    driver: bridge</span>
<span class="line">  pro:</span>
<span class="line">    driver: bridge</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面我们声明了3个服务；分别是：redis1、mysql1、web1；并且对3个服务都指定了对应的docker 镜像和端口。</p><h4 id="_2、启动" tabindex="-1"><a class="header-anchor" href="#_2、启动"><span>2、启动</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">#启动前最好把docker重启，不然原来的tomcat/mysql/redis容器也是启动状态的话，那么端口会冲突而启动失败 </span>
<span class="line">systemctl restart docker </span>
<span class="line"></span>
<span class="line">cd /usr/local/mycompose </span>
<span class="line"></span>
<span class="line">docker-compose up </span>
<span class="line"></span>
<span class="line"># 如果后台启动则使用如下命令 </span>
<span class="line">docker-compose up -d </span>
<span class="line"></span>
<span class="line"># 若要停止 </span>
<span class="line">docker-compose stop</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以查看到命令中，创建了两个自定义的网络（mycompose_dev和mycompose_pro），然后创建容器，并「Attaching to …」，将网络应用到服务上。</p><p>可以查看一下具体的网络，使用docker network ls 如下：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802030057950.73932fc5.png" alt="image-20220802030057950"></p><p>查看启动的容器：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802030034771.cd359b2e.png" alt="image-20220802030034771"></p><h4 id="_3、-测试" tabindex="-1"><a class="header-anchor" href="#_3、-测试"><span>3、 测试</span></a></h4><p>在windows下访问启动的3个服务进行测试都可以；如下面访问9090的tomcat如下：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802030132427.e2867ecf.png" alt="image-20220802030132427"></p><h2 id="第三章-迁移备份仓库" tabindex="-1"><a class="header-anchor" href="#第三章-迁移备份仓库"><span>第三章 迁移备份仓库</span></a></h2><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802035604213.a1ff4638.png" alt="image-20220802035604213"></p><h3 id="一、迁移与备份" tabindex="-1"><a class="header-anchor" href="#一、迁移与备份"><span>一、迁移与备份</span></a></h3><h4 id="_1、-将docker容器保存为镜像" tabindex="-1"><a class="header-anchor" href="#_1、-将docker容器保存为镜像"><span>1、 将Docker容器保存为镜像</span></a></h4><p>使用docker commit命令可以将容器保存为镜像。</p><p>命令形式：docker commit 容器名称 镜像名称</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 保存nginx容器为镜像 </span>
<span class="line">docker commit ydlcentos1 ydlcentos1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>此镜像的内容就是当前容器的内容，接下来你可以用此镜像再次运行新的容器</p><h4 id="_2、-镜像备份" tabindex="-1"><a class="header-anchor" href="#_2、-镜像备份"><span>2、 镜像备份</span></a></h4><p>使用docker save命令可以将已有镜像保存为tar 文件。</p><p>命令形式：docker save –o tar文件名 镜像名</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 保存镜像为文件 </span>
<span class="line">docker save -o ydlcentos1.tar ydlcentos1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802032156887.a2e3f565.png" alt="image-20220802032156887"></p><h4 id="_3、-镜像恢复与迁移" tabindex="-1"><a class="header-anchor" href="#_3、-镜像恢复与迁移"><span>3、 镜像恢复与迁移</span></a></h4><p>使用docker load命令可以根据tar文件恢复为docker镜像。</p><p>命令形式：docker load -i tar文件名</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 停止mynginx容器 </span>
<span class="line">docker stop ydlcentos1 </span>
<span class="line"># 删除mynginx容器 </span>
<span class="line">docker rm ydlcentos1 </span>
<span class="line"># 删除mynginx镜像 </span>
<span class="line">docker rmi ydlcentos1 </span>
<span class="line"># 加载恢复mynginx镜像 </span>
<span class="line">docker load -i ydlcentos1.tar </span>
<span class="line"># 在镜像恢复之后，基于该镜像再次创建启动容器 </span>
<span class="line">docker run -di --name=ydlcentos1 ydlcentos1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：在执行docker load命令恢复镜像时，需要先删除原镜像。</p><h3 id="二、-使用dockerfile创建镜像" tabindex="-1"><a class="header-anchor" href="#二、-使用dockerfile创建镜像"><span>二、 使用Dockerfile创建镜像</span></a></h3><h4 id="_1、-什么是dockerfile文件" tabindex="-1"><a class="header-anchor" href="#_1、-什么是dockerfile文件"><span>1、 什么是Dockerfile文件</span></a></h4><p>前面的课程中已经知道了，要获得镜像，可以从Docker仓库中进行下载。那如果我们想自己开发一个镜像，那该如何做呢？答案是：Dockerfifile</p><p>Dockerfifile其实就是一个文本文件，由一系列命令和参数构成，Docker可以读取Dockerfifile文件并根据Dockerfifile文件的描述来构建镜像。</p><p>Dockerfifile文件内容一般分为4部分：</p><ul><li>基础镜像信息</li><li>维护者信息</li><li>镜像操作指令</li><li>容器启动时执行的指令</li></ul><h4 id="_2、dockerfifile常用命令" tabindex="-1"><a class="header-anchor" href="#_2、dockerfifile常用命令"><span>2、Dockerfifile常用命令</span></a></h4><p>Dockerfile可以基于镜像制作镜像；<code>docker build -t=&#39;jdk1.8&#39; .</code></p><table><thead><tr><th>关键字</th><th>作用</th><th>备注</th></tr></thead><tbody><tr><td>FROM</td><td>指定父镜像</td><td>指定dockerfile基于那个image构建</td></tr><tr><td>MAINTAINER</td><td>作者信息</td><td>用来标明这个dockerfile谁写的</td></tr><tr><td>LABEL</td><td>标签</td><td>用来标明dockerfile的标签 可以使用Label代替Maintainer 最终都是在docker image基本信息中可以查看</td></tr><tr><td>RUN</td><td>执行命令</td><td>执行一段命令 默认是/bin/sh 格式: RUN command 或者 RUN [&quot;command&quot; , &quot;param1&quot;,&quot;param2&quot;]</td></tr><tr><td>CMD</td><td>容器启动命令</td><td>提供启动容器时候的默认命令 和ENTRYPOINT配合使用.格式 CMD command param1 param2 或者 CMD [&quot;command&quot; , &quot;param1&quot;,&quot;param2&quot;]</td></tr><tr><td>ENTRYPOINT</td><td>入口</td><td>一般在制作一些执行就关闭的容器中会使用</td></tr><tr><td>COPY</td><td>复制文件</td><td>build的时候复制文件到image中</td></tr><tr><td>ADD</td><td>添加文件</td><td>build的时候添加文件到image中 不仅仅局限于当前build上下文 可以来源于远程服务</td></tr><tr><td>ENV</td><td>环境变量</td><td>指定build时候的环境变量 可以在启动的容器的时候 通过-e覆盖 格式ENV name=value</td></tr><tr><td>ARG</td><td>构建参数</td><td>构建参数 只在构建的时候使用的参数 如果有ENV 那么ENV的相同名字的值始终覆盖arg的参数</td></tr><tr><td>VOLUME</td><td>定义外部可以挂载的数据卷</td><td>指定build的image那些目录可以启动的时候挂载到文件系统中 启动容器的时候使用 -v 绑定 格式 VOLUME [&quot;目录&quot;]</td></tr><tr><td>EXPOSE</td><td>暴露端口</td><td>定义容器运行的时候监听的端口 启动容器的使用-p来绑定暴露端口 格式: EXPOSE 8080 或者 EXPOSE 8080/udp</td></tr><tr><td>WORKDIR</td><td>工作目录</td><td>指定容器内部的工作目录 如果没有创建则自动创建 如果指定/ 使用的是绝对地址 如果不是/开头那么是在上一条workdir的路径的相对路径</td></tr><tr><td>USER</td><td>指定执行用户</td><td>指定build或者启动的时候 用户 在RUN CMD ENTRYPONT执行的时候的用户</td></tr><tr><td>HEALTHCHECK</td><td>健康检查</td><td>指定监测当前容器的健康监测的命令 基本上没用 因为很多时候 应用本身有健康监测机制</td></tr><tr><td>ONBUILD</td><td>触发器</td><td>当存在ONBUILD关键字的镜像作为基础镜像的时候 当执行FROM完成之后 会执行 ONBUILD的命令 但是不影响当前镜像 用处也不怎么大</td></tr><tr><td>STOPSIGNAL</td><td>发送信号量到宿主机</td><td>该STOPSIGNAL指令设置将发送到容器的系统调用信号以退出。</td></tr><tr><td>SHELL</td><td>指定执行脚本的shell</td><td>指定RUN CMD ENTRYPOINT 执行命令的时候 使用的shell</td></tr></tbody></table><h4 id="_3、-使用dockerfile创建镜像" tabindex="-1"><a class="header-anchor" href="#_3、-使用dockerfile创建镜像"><span>3、 使用Dockerfile创建镜像</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 1、创建目录 </span>
<span class="line">mkdir –p /usr/local/dockerjdk8 </span>
<span class="line">cd /usr/local/dockerjdk8 </span>
<span class="line"></span>
<span class="line"># 2、下载jdk-8u231-linux-x64.tar.gz并上传到服务器（虚拟机）中的/usr/local/dockerjdk8目录 </span>
<span class="line"></span>
<span class="line"># 3、在/usr/local/dockerjdk8目录下创建Dockerfile文件，文件内容如下： </span>
<span class="line">vi Dockerfile </span>
<span class="line"></span>
<span class="line">FROM centos:7 </span>
<span class="line">MAINTAINER ITLILS </span>
<span class="line">WORKDIR /usr </span>
<span class="line">RUN mkdir /usr/local/java </span>
<span class="line">ADD jdk-8u231-linux-x64.tar.gz /usr/local/java/ </span>
<span class="line">ENV JAVA_HOME /usr/local/java/jdk1.8.0_231 </span>
<span class="line">ENV JRE_HOME $JAVA_HOME/jre </span>
<span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH </span>
<span class="line">ENV PATH $JAVA_HOME/bin:$PATH </span>
<span class="line"></span>
<span class="line"># 4、执行命令构建镜像；不要忘了后面的那个 . </span>
<span class="line">docker build -t=&#39;jdk1.8&#39; . </span>
<span class="line"></span>
<span class="line"># 5、查看镜像是否建立完成 </span>
<span class="line">docker images</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802034204602.52a6d1f9.png" alt="image-20220802034204602"></p><h4 id="_4、-基于镜像创建容器" tabindex="-1"><a class="header-anchor" href="#_4、-基于镜像创建容器"><span>4、 基于镜像创建容器</span></a></h4><p>基于刚刚创建的镜像 jdk1.8 创建并启动容器进行测试；</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 创建并启动容器 </span>
<span class="line">docker run -it --name=testjdk jdk1.8 /bin/bash </span>
<span class="line"># 在容器中测试jdk是否已经安装 </span>
<span class="line">java -version</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802034313026.97b93b5b.png" alt="image-20220802034313026"></p><p><strong>作业：</strong></p><ol><li>boot 一个controller 访问/test,返回“hello yuandongli!”</li><li>打成jar包，使用Dockerfile，centos:7为底构建一个镜像，起起来，可以访问到8080/test,返回“hello yuandongli!”</li></ol><h3 id="三、-私有仓库搭建与配置" tabindex="-1"><a class="header-anchor" href="#三、-私有仓库搭建与配置"><span>三、 私有仓库搭建与配置</span></a></h3><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802035500638.f74f89e7.png" alt="image-20220802035500638"></p><h4 id="_1-私有仓库搭建与配置" tabindex="-1"><a class="header-anchor" href="#_1-私有仓库搭建与配置"><span>1. 私有仓库搭建与配置</span></a></h4><p>Docker官方的Docker hub（https://hub.docker.com）是一个用于管理公共镜像的仓库，我们可以从上面拉取镜像到本地，也可以把我们自己的镜像推送上去。但是，有时候我们的服务器无法访问互联网，或者你不希望将自己的镜像放到公网当中，那么我们就需要搭建自己的私有仓库来存储和管理自己的镜像。</p><p>私有仓库搭建步骤：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1、拉取私有仓库镜像 </span></span>
<span class="line"><span class="token function">docker</span> pull registry</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2、启动私有仓库容器 </span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-id</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>registry <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 registry</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3、打开浏览器 输入地址http://私有仓库服务器ip:5000/v2/_catalog，看到{&quot;repositories&quot;:[]} 表示私有仓库 搭建成功</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4、修改daemon.json   </span></span>
<span class="line"><span class="token function">vim</span> /etc/docker/daemon.json   </span>
<span class="line"></span>
<span class="line"><span class="token comment"># 在上述文件中添加一个key，保存退出。此步用于让 docker 信任私有仓库地址；注意将私有仓库服务器ip修改为自己私有仓库服务器真实ip </span></span>
<span class="line"><span class="token punctuation">{</span><span class="token string">&quot;insecure-registries&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;私有仓库服务器ip:5000&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span> </span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5、重启docker 服务 </span></span>
<span class="line">systemctl restart <span class="token function">docker</span></span>
<span class="line"><span class="token function">docker</span> start registry</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802035716690.5eaa68fb.png" alt="image-20220802035716690"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802035845322.f9eec603.png" alt="image-20220802035845322"></p><h4 id="_2-将镜像上传至私有仓库" tabindex="-1"><a class="header-anchor" href="#_2-将镜像上传至私有仓库"><span>2. 将镜像上传至私有仓库</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1、标记镜像为私有仓库的镜像     </span></span>
<span class="line"><span class="token function">docker</span> tag redis:5.0 <span class="token number">192.168</span>.246.128:5000/redis:5.0</span>
<span class="line"> </span>
<span class="line"><span class="token comment"># 2、上传标记的镜像     </span></span>
<span class="line"><span class="token function">docker</span> push <span class="token number">192.168</span>.246.128:5000/redis:5.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802040142936.cd6ccb18.png" alt="image-20220802040142936"></p><h4 id="_3-从私有仓库拉取镜像" tabindex="-1"><a class="header-anchor" href="#_3-从私有仓库拉取镜像"><span>3. 从私有仓库拉取镜像</span></a></h4><p><strong>（1）</strong> <strong>私有仓库所在服务器拉取镜像</strong></p><p>若是在私有仓库所在的服务器上去拉取镜像；那么直接执行如下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 因为私有仓库所在的服务器上已经存在相关镜像；所以先删除；请指定镜像名，不是id </span></span>
<span class="line"><span class="token function">docker</span> rmi <span class="token number">192.168</span>.246.128:5000/redis:5.0</span>
<span class="line"></span>
<span class="line"><span class="token comment">#拉取镜像 </span></span>
<span class="line"><span class="token function">docker</span> pull <span class="token number">192.168</span>.246.128:5000/redis:5.0</span>
<span class="line"></span>
<span class="line"><span class="token comment">#可以通过如下命令查看 docker 的信息；了解到私有仓库地址 </span></span>
<span class="line"><span class="token function">docker</span> info</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802040432037.627459e6.png" alt="image-20220802040432037"></p><p>在仓库所在服务器上去拉取镜像是比较少有的操作；作为了解即可。</p><p><strong>（2）</strong> <strong>其它服务器拉取私有仓库镜像</strong></p><p>大多数情况下，都是某台服务器部署了私有镜像仓库之后；到其它服务器上从私有仓库中拉取镜像，若要拉取私有仓库镜像需要去修改docker的配置文件，设置启动时候的仓库地址。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 打开配置文件 </span>
<span class="line">vi /usr/lib/systemd/system/docker.service </span>
<span class="line"></span>
<span class="line"># 在打开的上述文件中按照下面的图，添加如下的内容；注意修改下面内容中的ip地址 </span>
<span class="line">--add-registry=192.168.246.128:5000 --insecure-registry=192.168.246.128:5000 \ </span>
<span class="line"></span>
<span class="line"># 修改完后需要重新加载docker配置文件并重启docker </span>
<span class="line">systemctl daemon-reload </span>
<span class="line">systemctl restart docker</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在重启之后；那么则可以去拉取私有仓库中的镜像：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 执行拉取镜像命令并查看 </span>
<span class="line">docker 192.168.246.128:5000/redis:5.0</span>
<span class="line"></span>
<span class="line">docker images</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、和虚拟机对比" tabindex="-1"><a class="header-anchor" href="#四、和虚拟机对比"><span>四、和虚拟机对比</span></a></h3><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20200622200917932.0185b1c3.png" alt="image-20200622200917932"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20200622200927992.2fb8689d.png" alt="image-20200622200927992"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220802041415505.8a5a6240.png" alt="image-20220802041415505"></p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CiSBoDQ3.js" defer></script>
  </body>
</html>
