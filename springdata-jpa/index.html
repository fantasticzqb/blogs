<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/lucy.ico"><title>SPRING-DATA-JPA | 彗星文档</title><meta name="description" content="繁星似海 熠熠生辉">
    <link rel="preload" href="/blogs/assets/style-CPtAZutf.css" as="style"><link rel="stylesheet" href="/blogs/assets/style-CPtAZutf.css">
    <link rel="modulepreload" href="/blogs/assets/app-lCTfir8o.js"><link rel="modulepreload" href="/blogs/assets/index.html-B3Tp5pbT.js">
    <link rel="prefetch" href="/blogs/assets/about.html-CwGac_md.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bmlc_r66.js" as="script"><link rel="prefetch" href="/blogs/assets/activiti.html-CcVZM8Nf.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DsTkj-ck.js" as="script"><link rel="prefetch" href="/blogs/assets/css.html-CxNsDRZ0.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DMb5SD8N.js" as="script"><link rel="prefetch" href="/blogs/assets/datastructure.html-BS9NK5Ec.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DSpeADom.js" as="script"><link rel="prefetch" href="/blogs/assets/design.html-Bn970E7i.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DxtolBES.js" as="script"><link rel="prefetch" href="/blogs/assets/docker.html-DJiB5ffn.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bh8haqme.js" as="script"><link rel="prefetch" href="/blogs/assets/elk1.html-DVw7yBTc.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-rMbIwsB0.js" as="script"><link rel="prefetch" href="/blogs/assets/elk2.html-6lHNVoJu.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DN_CU-HS.js" as="script"><link rel="prefetch" href="/blogs/assets/html.html-CoqSyGRp.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DTSxBCYN.js" as="script"><link rel="prefetch" href="/blogs/assets/abnormal.html-BLVlFLx7.js" as="script"><link rel="prefetch" href="/blogs/assets/api.html-CJqzCtEn.js" as="script"><link rel="prefetch" href="/blogs/assets/base.html-CFYUzLSs.js" as="script"><link rel="prefetch" href="/blogs/assets/encapsulation.html-BqUEU85s.js" as="script"><link rel="prefetch" href="/blogs/assets/Inheritance.html-CWKD1mwW.js" as="script"><link rel="prefetch" href="/blogs/assets/JVM.html-CHhTxott.js" as="script"><link rel="prefetch" href="/blogs/assets/other.html-esHez3i2.js" as="script"><link rel="prefetch" href="/blogs/assets/polymorphism.html-Cw23OCdP.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-C-sGRpwE.js" as="script"><link rel="prefetch" href="/blogs/assets/collection.html-CkZbKPTl.js" as="script"><link rel="prefetch" href="/blogs/assets/enum.html-BTy0PmP6.js" as="script"><link rel="prefetch" href="/blogs/assets/format.html-f_JlLynv.js" as="script"><link rel="prefetch" href="/blogs/assets/Generics.html-DgOxAMe0.js" as="script"><link rel="prefetch" href="/blogs/assets/iostream.html-B-cr8Oq-.js" as="script"><link rel="prefetch" href="/blogs/assets/NIO.html-BXDqR3KD.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-pO5428dm.js" as="script"><link rel="prefetch" href="/blogs/assets/reflection.html-CbgItrqf.js" as="script"><link rel="prefetch" href="/blogs/assets/socket.html-B3mSLPlW.js" as="script"><link rel="prefetch" href="/blogs/assets/thread.html-CYtNBg5m.js" as="script"><link rel="prefetch" href="/blogs/assets/tree.html-DGlurv8q.js" as="script"><link rel="prefetch" href="/blogs/assets/jdbc.html-BKij-WDL.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BXtSsA3o.js" as="script"><link rel="prefetch" href="/blogs/assets/js.html-B5dmvd_Q.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-OiTBnnTU.js" as="script"><link rel="prefetch" href="/blogs/assets/log.html-BRBpaHaM.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-D5nLRe-s.js" as="script"><link rel="prefetch" href="/blogs/assets/message.html-BiZ-uOTo.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DtZLZM2t.js" as="script"><link rel="prefetch" href="/blogs/assets/maven.html-DRA46MVg.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BYhJnwg6.js" as="script"><link rel="prefetch" href="/blogs/assets/mybatis.html-BlszuFDB.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DRRarCVZ.js" as="script"><link rel="prefetch" href="/blogs/assets/mybatisplus.html-BCWOq2Ku.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BKVPKwfI.js" as="script"><link rel="prefetch" href="/blogs/assets/mysql-base.html-C47GTOUM.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-ewE9MR5N.js" as="script"><link rel="prefetch" href="/blogs/assets/mysql-rise.html-BQtltpil.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CStunAJJ.js" as="script"><link rel="prefetch" href="/blogs/assets/nginx.html-g_s-XCn4.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-C1U4oioN.js" as="script"><link rel="prefetch" href="/blogs/assets/archive1.html-nDCm_xpK.js" as="script"><link rel="prefetch" href="/blogs/assets/archive2.html-u0znmk-K.js" as="script"><link rel="prefetch" href="/blogs/assets/article1.html-p9DJnEcE.js" as="script"><link rel="prefetch" href="/blogs/assets/article10.html-CejbM4lO.js" as="script"><link rel="prefetch" href="/blogs/assets/article11.html-DCE1rh06.js" as="script"><link rel="prefetch" href="/blogs/assets/article12.html-BSidm-Ba.js" as="script"><link rel="prefetch" href="/blogs/assets/article2.html-CQpOnyZR.js" as="script"><link rel="prefetch" href="/blogs/assets/article3.html-DuEkqrM7.js" as="script"><link rel="prefetch" href="/blogs/assets/article4.html-DA64BfGU.js" as="script"><link rel="prefetch" href="/blogs/assets/article5.html-s6mxYA_p.js" as="script"><link rel="prefetch" href="/blogs/assets/article6.html-B197gRU7.js" as="script"><link rel="prefetch" href="/blogs/assets/article7.html-pcnVqP9L.js" as="script"><link rel="prefetch" href="/blogs/assets/article8.html-CbfNWJEj.js" as="script"><link rel="prefetch" href="/blogs/assets/article9.html-62x9ZAGs.js" as="script"><link rel="prefetch" href="/blogs/assets/sticky.html-CEy0fMvF.js" as="script"><link rel="prefetch" href="/blogs/assets/sticky2.html-CQoTTOFc.js" as="script"><link rel="prefetch" href="/blogs/assets/questions.html-Dlhv6JCe.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-D1HsJXcM.js" as="script"><link rel="prefetch" href="/blogs/assets/rabbitmq.html-C8fManfe.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BBFrymvP.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DOczPhHx.js" as="script"><link rel="prefetch" href="/blogs/assets/redis.html-D8IWpCPQ.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-MQBMT9st.js" as="script"><link rel="prefetch" href="/blogs/assets/rocketmq.html-lnPaq8nc.js" as="script"><link rel="prefetch" href="/blogs/assets/buy2.html-D_3HYsB2.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-B1SqRI5z.js" as="script"><link rel="prefetch" href="/blogs/assets/buy1.html-CWFQovuV.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-rAVfNoMu.js" as="script"><link rel="prefetch" href="/blogs/assets/buy3.html-DGqysypB.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CvtAyC4m.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bfuui3Zu.js" as="script"><link rel="prefetch" href="/blogs/assets/springboot.html-fEHFCAcM.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-rsGlUjEP.js" as="script"><link rel="prefetch" href="/blogs/assets/spring.html-Bm_O6OE3.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bhvpf5rk.js" as="script"><link rel="prefetch" href="/blogs/assets/springcloud.html-BjHWqyWy.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-b6YY5CsR.js" as="script"><link rel="prefetch" href="/blogs/assets/sort.html-joQ5eRAc.js" as="script"><link rel="prefetch" href="/blogs/assets/springdata-jpa.html-u-02xmMZ.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CKv9bCmE.js" as="script"><link rel="prefetch" href="/blogs/assets/springmvc.html-B-a-J7G-.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Cob0X_yF.js" as="script"><link rel="prefetch" href="/blogs/assets/springsecurity.html-DwdZqar9.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DaEP4Ra5.js" as="script"><link rel="prefetch" href="/blogs/assets/springcloudalibaba.html-BBN5s4dO.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BrsTW-lC.js" as="script"><link rel="prefetch" href="/blogs/assets/ssm.html-ouUOQOUc.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-KtY1sCgk.js" as="script"><link rel="prefetch" href="/blogs/assets/git.html-DqNFMCHU.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CmqEuZ7T.js" as="script"><link rel="prefetch" href="/blogs/assets/linux.html-B7-z166i.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-HWeIG5KW.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-T8le10LB.js" as="script"><link rel="prefetch" href="/blogs/assets/web.html-DFbBf6pK.js" as="script"><link rel="prefetch" href="/blogs/assets/404.html-C3uFSwJ9.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CPUHdlNd.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CPnK-iCi.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DF__Rx4f.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bli0azJb.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-S_aKhGFb.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-B8N8CgD2.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-2pAFkgiN.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Sd4lJVSX.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-DeWCtPaP.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-sjnxI3kQ.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BAM5dfnV.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-BzVEjl4A.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-CP1X2dZe.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Bd7ryFjl.js" as="script"><link rel="prefetch" href="/blogs/assets/index.html-Ca4ztyKw.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/blogs/"><img class="vp-site-logo" src="/blogs/comet.png" alt="彗星文档"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">彗星文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/blogs/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/blogs/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/blogs/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/blogs/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/blogs/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">目录 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/blogs/springdata-jpa/springdata-jpa.html" aria-label="SpringData-JPA"><!---->SpringData-JPA<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="spring-data-jpa" tabindex="-1"><a class="header-anchor" href="#spring-data-jpa"><span>SPRING-DATA-JPA</span></a></h1><p>为什么出这个课程：中小企业当中，老代码，jpa</p><p>若依、eladmin二次开发的框架，jpa</p><p>jpa场景：国外软件，jpa使用量，大于国内mybatis。</p><h2 id="第一章-orm概述-了解" tabindex="-1"><a class="header-anchor" href="#第一章-orm概述-了解"><span>第一章 ORM概述-了解</span></a></h2><p>ORM（Object-Relational Mapping） 表示对象关系映射。在面向对象的软件开发中，通过ORM，就可以把对象映射到关系型数据库中。只要有一套程序能够做到建立对象与数据库的关联，操作对象就可以直接操作数据库数据，就可以说这套程序实现了ORM对象关系映射</p><p>简单的说：ORM就是建立实体类和数据库表之间的关系，从而达到操作实体类就相当于操作数据库表的目的。</p><h3 id="一、为什么使用orm" tabindex="-1"><a class="header-anchor" href="#一、为什么使用orm"><span>一、为什么使用ORM</span></a></h3><p>当实现一个应用程序时（不使用O/R Mapping），我们可能会写特别多数据访问层的代码，从数据库保存数据、修改数据、删除数据，而这些代码都是重复的。而使用ORM则会大大减少重复性代码。对象关系映射（Object Relational Mapping，简称ORM），主要实现程序对象到关系数据库数据的映射。</p><h3 id="二、常见orm框架" tabindex="-1"><a class="header-anchor" href="#二、常见orm框架"><span>二、常见ORM框架</span></a></h3><p>常见的orm框架：Mybatis（ibatis）、Hibernate、Jpa</p><h2 id="第二章-hibernate与jpa的概述-了解" tabindex="-1"><a class="header-anchor" href="#第二章-hibernate与jpa的概述-了解"><span>第二章 hibernate与JPA的概述-了解</span></a></h2><h3 id="一、hibernate概述" tabindex="-1"><a class="header-anchor" href="#一、hibernate概述"><span>一、hibernate概述</span></a></h3><p>Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装，它将POJO与数据库表建立映射关系，是一个全自动的orm框架，hibernate可以自动生成SQL语句，自动执行，使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。</p><h3 id="二、-jpa概述" tabindex="-1"><a class="header-anchor" href="#二、-jpa概述"><span>二、 JPA概述</span></a></h3><p>JAVA的全称是Java Persistence API， 即Java 持久化API，是SUN公司推出的一套基于ORM的规范，内部是由一系列的接口和抽象类构成。</p><p>JPA通过JDK 5.0注解描述对象－关系表的映射关系，并将运行期的实体对象持久化到数据库中。</p><h3 id="三、jpa的优势" tabindex="-1"><a class="header-anchor" href="#三、jpa的优势"><span>三、JPA的优势</span></a></h3><h4 id="_1-标准化" tabindex="-1"><a class="header-anchor" href="#_1-标准化"><span>1. 标准化</span></a></h4><p>JPA 是 JCP 组织发布的 Java EE 标准之一，因此任何声称符合 JPA 标准的框架都遵循同样的架构，提供相同的访问API，这保证了基于JPA开发的企业应用能够经过少量的修改就能够在不同的JPA框架下运行。</p><h4 id="_2-容器级特性的支持" tabindex="-1"><a class="header-anchor" href="#_2-容器级特性的支持"><span>2. 容器级特性的支持</span></a></h4><p>JPA框架中支持大数据集、事务、并发等容器级事务，这使得 JPA 超越了简单持久化框架的局限，在企业应用发挥更大的作用。</p><h4 id="_3-简单方便" tabindex="-1"><a class="header-anchor" href="#_3-简单方便"><span>3. 简单方便</span></a></h4><p>JPA的主要目标之一就是提供更加简单的编程模型：在JPA框架下创建实体和创建Java 类一样简单，没有任何的约束和限制，只需要使用 javax.persistence.Entity进行注释，JPA的框架和接口也都非常简单，没有太多特别的规则和设计模式的要求，开发者可以很容易的掌握。JPA基于非侵入式原则设计，因此可以很容易的和其它框架或者容器集成。</p><h4 id="_4-查询能力" tabindex="-1"><a class="header-anchor" href="#_4-查询能力"><span>4. 查询能力</span></a></h4><p>JPA的查询语言是面向对象而非面向数据库的，它以面向对象的自然语法构造查询语句，可以看成是Hibernate HQL的等价物。JPA定义了独特的JPQL（Java Persistence Query Language），JPQL是EJB QL的一种扩展，它是针对实体的一种查询语言，操作对象是实体，而不是关系数据库的表，而且能够支持批量更新和修改、JOIN、GROUP BY、HAVING 等通常只有 SQL 才能够提供的高级查询特性，甚至还能够支持子查询。</p><h4 id="_5-高级特性" tabindex="-1"><a class="header-anchor" href="#_5-高级特性"><span>5. 高级特性</span></a></h4><p>JPA 中能够支持面向对象的高级特性，如类之间的继承、多态和类之间的复杂关系，这样的支持能够让开发者最大限度的使用面向对象的模型设计企业应用，而不需要自行处理这些特性在关系数据库的持久化。</p><h3 id="四、-jpa与hibernate的关系" tabindex="-1"><a class="header-anchor" href="#四、-jpa与hibernate的关系"><span>四、 JPA与hibernate的关系</span></a></h3><p>JPA规范本质上就是一种ORM规范，注意不是ORM框架——因为JPA并未提供ORM实现，它只是制订了一些规范，提供了一些编程的API接口，但具体实现则由服务厂商来提供实现。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220807233843298.065a96af.png" alt="image-20220807233843298"></p><p>JPA和Hibernate的关系就像JDBC和JDBC驱动的关系，JPA是规范，Hibernate除了作为ORM框架之外，它也是一种JPA实现。JPA怎么取代Hibernate呢？JDBC规范可以驱动底层数据库吗？答案是否定的，也就是说，如果使用JPA规范进行数据库操作，底层需要hibernate作为其实现类完成数据持久化工作。</p><h2 id="第三章-jpa的入门案例" tabindex="-1"><a class="header-anchor" href="#第三章-jpa的入门案例"><span>第三章 JPA的入门案例</span></a></h2><p>新建maven boot项目</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808000147721.d789ed9d.png" alt="image-20220808000147721"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808000234306.69e01cb1.png" alt="image-20220808000234306"></p><h3 id="一、配置数据源" tabindex="-1"><a class="header-anchor" href="#一、配置数据源"><span>一、配置数据源</span></a></h3><p>这里用的yml方式,里面的jpa就是数据库的名称,大家也可以写其他的,前提是这个数据库存在,用户名和密码写自己的就好。</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">datasource</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver</span>
<span class="line">    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/jpa<span class="token punctuation">?</span>serverTimezone=UTC</span>
<span class="line">    <span class="token key atrule">username</span><span class="token punctuation">:</span> root</span>
<span class="line">    <span class="token key atrule">password</span><span class="token punctuation">:</span> ydlclass666</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、导入依赖" tabindex="-1"><a class="header-anchor" href="#二、导入依赖"><span>二、导入依赖</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.28<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、创建实体类" tabindex="-1"><a class="header-anchor" href="#三、创建实体类"><span>三、创建实体类</span></a></h3><p>通过注解方式让数据库知道我们的表长什么样</p><p>这里就可以知道表的名称是users(当然你可以任意取名),表的创建一般都有主键和自增操作,这里全部通过注解来完成。这里第一次创建表的时候表名会爆红,我们需要给他手动指定数据库,也就是数据源配置时的数据库</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * @Created by IT李老师</span>
<span class="line"> * 公主号 “元动力课堂”</span>
<span class="line"> * 个人微 itlils</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span> <span class="token comment">//这是实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token comment">//对应哪张表</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Id</span> <span class="token comment">//这是主键</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token comment">//数据库中的id,对应属性中的id</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span> <span class="token comment">//</span></span>
<span class="line">    <span class="token keyword">int</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token comment">//数据库中的username,对应属性中的username</span></span>
<span class="line">    <span class="token class-name">String</span> username<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token comment">//数据库中的password,对应属性中的password</span></span>
<span class="line">    <span class="token class-name">String</span> password<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里我们还需要设置自动表定义ddl-auto</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">jpa</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">show-sql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#显示sql</span></span>
<span class="line">    <span class="token key atrule">hibernate</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">ddl-auto</span><span class="token punctuation">:</span> create <span class="token comment">#自动生成表</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ddl-auto属性用于设置自动表定义，可以实现自动在数据库中为我们创建一个表，表的结构会根据我们定义的实体类决定，它有4种</p><ul><li>create 启动时删数据库中的表，然后创建，退出时不删除数据表</li><li>create-drop 启动时删数据库中的表，然后创建，退出时删除数据表 如果表不存在报错</li><li>update 如果启动时表格式不一致则更新表，原有数据保留</li><li>validate 项目启动表结构进行校验 如果不一致则报错</li></ul><h3 id="四、启动测试类完成表创建" tabindex="-1"><a class="header-anchor" href="#四、启动测试类完成表创建"><span>四、启动测试类完成表创建</span></a></h3><p>这时候可以看到控制台打印这两句话,就会发现表已经创建成功了(和我们自己去敲命令行十分类似,hibernate帮我们完成这些操作,是不是很方便) 删表是因为选择了create策略创建表,后面还会讲其他的策略。 <img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808002349223.4b9fae29.png" alt="image-20220808002349223"></p><p>我们可以添加一条记录测试一下表 发现没有问题</p><p><img src="data:image/png;base64,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" alt="image-20220808002952122"></p><h3 id="五、如何访问我们的表" tabindex="-1"><a class="header-anchor" href="#五、如何访问我们的表"><span>五、如何访问我们的表</span></a></h3><p>这里我们需要自定义借口继承接口JpaRepository</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Repository</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意JpaRepository有两个泛型，前者是具体操作的对象实体，也就是对应的表，后者是ID的类型，接口中已经定义了比较常用的数据库操作。编写接口继承即可，我们可以直接注入此接口获得实现类： 这是查操作</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">UserRepository</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@SpringBootTest</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">YdljpaApplicationTests</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808003340788.fad30c9b.png" alt="image-20220808003340788"> 这里需要注意把create策略改成update,因为create策略会删表中数据</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808004442911.8c3db270.png" alt="image-20220808004442911"></p><p>这是增操作</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">User</span> user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//user.setId(2);</span></span>
<span class="line">        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;itnanls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;ydl666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">User</span> saveUser <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//新增 返回的实体中带着实体id</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>saveUser<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808003840259.412299c2.png" alt="image-20220808003840259"></p><p>这是删操作</p><p>这是删操作</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        userRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808003949975.6b8f31df.png" alt="image-20220808003949975"></p><p>这是分页操作 每页只显示一个数据 ,大家可以先多添加几条记录后再来测试</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPageable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        userRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808004236628.1258db66.png" alt="image-20220808004236628"></p><p>自带的方法肯定不止这几个,这里就是一一举例。</p><p>自带的方法肯定不止这几个,这里就是一一举例。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808004306106.e02efb78.png" alt="image-20220808004306106"></p><h2 id="第四章-方法命名规则查询" tabindex="-1"><a class="header-anchor" href="#第四章-方法命名规则查询"><span>第四章 方法命名规则查询</span></a></h2><p>顾名思义，方法命名规则查询就是根据方法的名字，就能创建查询。只需要按照Spring Data JPA提供的方法命名规则定义方法的名称，就可以完成查询工作。Spring Data JPA在程序执行的时候会根据方法名称进行解析，并自动生成查询语句进行查询.</p><p>按照Spring Data JPA 定义的规则，查询方法以findBy开头，涉及条件查询时，条件的属性用条件关键字连接，要注意的是：条件属性首字母需大写。框架在进行方法名解析时，会先把方法名多余的前缀截取掉，然后对剩下部分进行解析。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">//根据username查询</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808013823671.7c5d1dc4.png" alt="image-20220808013823671"></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">List&lt;User&gt; findByUsernameAndPassword(String username,String password);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808014059171.0db17c68.png" alt="image-20220808014059171"></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">List&lt;User&gt; findByUsernameLike(String username);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808014320185.5a6c675b.png" alt="image-20220808014320185"></p><p>具体的关键字，使用方法和生产成SQL如下表所示</p><table><thead><tr><th>Keyword</th><th>Sample</th><th>JPQL</th></tr></thead><tbody><tr><td>And</td><td>findByLastnameAndFirstname</td><td>… where x.lastname = ?1 and x.firstname = ?2</td></tr><tr><td>Or</td><td>findByLastnameOrFirstname</td><td>… where x.lastname = ?1 or x.firstname = ?2</td></tr><tr><td>Is,Equals</td><td>findByFirstnameIs,findByFirstnameEquals</td><td>… where x.firstname = ?1</td></tr><tr><td>Between</td><td>findByStartDateBetween</td><td>… where x.startDate between ?1 and ?2</td></tr><tr><td>LessThan</td><td>findByAgeLessThan</td><td>… where x.age &lt; ?1</td></tr><tr><td>LessThanEqual</td><td>findByAgeLessThanEqual</td><td>… where x.age ⇐ ?1</td></tr><tr><td>GreaterThan</td><td>findByAgeGreaterThan</td><td>… where x.age &gt; ?1</td></tr><tr><td>GreaterThanEqual</td><td>findByAgeGreaterThanEqual</td><td>… where x.age &gt;= ?1</td></tr><tr><td>After</td><td>findByStartDateAfter</td><td>… where x.startDate &gt; ?1</td></tr><tr><td>Before</td><td>findByStartDateBefore</td><td>… where x.startDate &lt; ?1</td></tr><tr><td>IsNull</td><td>findByAgeIsNull</td><td>… where x.age is null</td></tr><tr><td>IsNotNull,NotNull</td><td>findByAge(Is)NotNull</td><td>… where x.age not null</td></tr><tr><td>Like</td><td>findByFirstnameLike</td><td>… where x.firstname like ?1</td></tr><tr><td>NotLike</td><td>findByFirstnameNotLike</td><td>… where x.firstname not like ?1</td></tr><tr><td>StartingWith</td><td>findByFirstnameStartingWith</td><td>… where x.firstname like ?1 (parameter bound with appended %)</td></tr><tr><td>EndingWith</td><td>findByFirstnameEndingWith</td><td>… where x.firstname like ?1 (parameter bound with prepended %)</td></tr><tr><td>Containing</td><td>findByFirstnameContaining</td><td>… where x.firstname like ?1 (parameter bound wrapped in %)</td></tr><tr><td>OrderBy</td><td>findByAgeOrderByLastnameDesc</td><td>… where x.age = ?1 order by x.lastname desc</td></tr><tr><td>Not</td><td>findByLastnameNot</td><td>… where x.lastname &lt;&gt; ?1</td></tr><tr><td>In</td><td>findByAgeIn(Collection ages)</td><td>… where x.age in ?1</td></tr><tr><td>NotIn</td><td>findByAgeNotIn(Collection age)</td><td>… where x.age not in ?1</td></tr><tr><td>TRUE</td><td>findByActiveTrue()</td><td>… where x.active = true</td></tr><tr><td>FALSE</td><td>findByActiveFalse()</td><td>… where x.active = false</td></tr><tr><td>IgnoreCase</td><td>findByFirstnameIgnoreCase</td><td>… where UPPER(x.firstame) = UPPER(?1)</td></tr></tbody></table><h2 id="第五章-使用jpql的方式查询" tabindex="-1"><a class="header-anchor" href="#第五章-使用jpql的方式查询"><span>第五章 使用JPQL的方式查询</span></a></h2><p>使用Spring Data JPA提供的查询方法已经可以解决大部分的应用场景，但是对于某些业务来说，我们还需要灵活的构造查询条件，这时就可以使用@Query注解，结合JPQL的语句方式完成查询。</p><p>@Query 注解的使用非常简单，只需在方法上面标注该注解，同时提供一个JPQL查询语句即可，注意：</p><ul><li>大多数情况下将*替换为别名</li><li>表名改为类名</li><li>字段名改为属性名</li><li>搭配注解@Query进行使用</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select 表别名 from 表名(实际为类名) 别名 where 别名.属性=&#39;itlils&#39;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="一、入门" tabindex="-1"><a class="header-anchor" href="#一、入门"><span>一、入门</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u from User u&quot;</span><span class="token punctuation">)</span><span class="token comment">//从实体类，查询，而不是表</span></span>
<span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808021357039.209b2cba.png" alt="image-20220808021357039"></p><h3 id="二、筛选条件" tabindex="-1"><a class="header-anchor" href="#二、筛选条件"><span>二、筛选条件</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u from User u where u.username=&#39;itlils&#39;&quot;</span><span class="token punctuation">)</span><span class="token comment">//从实体类，查询，而不是表。where不是列名，而是属性名</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUserByUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808021559832.2ee553c4.png" alt="image-20220808021559832"></p><h3 id="三、投影结果" tabindex="-1"><a class="header-anchor" href="#三、投影结果"><span>三、投影结果</span></a></h3><p>真实的业务当中，我们只想要表里某一些列。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u.id from User u&quot;</span><span class="token punctuation">)</span><span class="token comment">//从实体类，查询，而不是表</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808021946929.9949c62d.png" alt="image-20220808021946929"></p><h3 id="四、聚合查询" tabindex="-1"><a class="header-anchor" href="#四、聚合查询"><span>四、聚合查询</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select count(u) from User u&quot;</span><span class="token punctuation">)</span><span class="token comment">//从实体类，查询，而不是表</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllUser4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808022257969.dc5d8449.png" alt="image-20220808022257969"></p><h3 id="五、传参" tabindex="-1"><a class="header-anchor" href="#五、传参"><span>五、传参</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token comment">//修改数据 一定加上@Modifying 注解</span></span>
<span class="line">    <span class="token annotation punctuation">@Transactional</span></span>
<span class="line">    <span class="token annotation punctuation">@Modifying</span></span>
<span class="line">    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;update User set username=?1 where id=?2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">updateUsernameById2</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808022944792.ac091f3e.png" alt="image-20220808022944792"></p><h2 id="第六章-使用原生sql" tabindex="-1"><a class="header-anchor" href="#第六章-使用原生sql"><span>第六章 使用原生sql</span></a></h2><p>nativeQuery = true</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token comment">//修改数据 一定加上@Modifying 注解</span></span>
<span class="line">    <span class="token annotation punctuation">@Transactional</span></span>
<span class="line">    <span class="token annotation punctuation">@Modifying</span></span>
<span class="line">    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;update user u set u.username=?1 where u.id=?2&quot;</span><span class="token punctuation">,</span>nativeQuery <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">updateUsernameById3</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808023202904.f6eb68a6.png" alt="image-20220808023202904"></p><p>其他就和mybatis一样使用了</p><h2 id="第七章-一对一关系" tabindex="-1"><a class="header-anchor" href="#第七章-一对一关系"><span>第七章 一对一关系</span></a></h2><p>账户和账户明细</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808030240590.539bdc57.png" alt="image-20220808030240590"></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span>   <span class="token comment">//表示这个类是一个实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;account&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//对应的数据库中表名称</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>   <span class="token comment">//生成策略，这里配置为自增</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//对应表中id这一列</span></span>
<span class="line">    <span class="token annotation punctuation">@Id</span>     <span class="token comment">//此属性为主键</span></span>
<span class="line">    <span class="token keyword">int</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//对应表中username这一列</span></span>
<span class="line">    <span class="token class-name">String</span> username<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//对应表中password这一列</span></span>
<span class="line">    <span class="token class-name">String</span> password<span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">//一对一</span></span>
<span class="line">    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;detail_id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token annotation punctuation">@OneToOne</span><span class="token comment">//声明为一对一关系</span></span>
<span class="line">    <span class="token class-name">AccountDetail</span> detail<span class="token punctuation">;</span><span class="token comment">//对象类型,也可以理解这里写哪个实体类,外键就指向哪个实体类的主键</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;account_details&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountDetail</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span><span class="token comment">//还是设置一个自增主键</span></span>
<span class="line">    <span class="token annotation punctuation">@Id</span></span>
<span class="line">    <span class="token keyword">int</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">String</span> address<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">String</span> email<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">String</span> phone<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;real_name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">String</span> realName<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里从日志中可以看出hibernate帮我们完成外键的创建</p><p>但这还不能完成同时对两张表进行操作 设置懒加载完成想查什么就查什么功能,设置关联级别完成同时操作两张表</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;detail_id&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@OneToOne</span><span class="token punctuation">(</span>fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">LAZY</span><span class="token punctuation">,</span> cascade <span class="token operator">=</span> <span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">)</span> <span class="token comment">//设置关联操作为ALL</span></span>
<span class="line"><span class="token class-name">AccountDetail</span> detail<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的关联级别也是有多个,一般设置为all就行</p><ul><li>ALL：所有操作都进行关联操作</li><li>PERSIST：插入操作时才进行关联操作</li><li>REMOVE：删除操作时才进行关联操作</li><li>MERGE：修改操作时才进行关联操作</li></ul><p>测试：运行测试类任意方法，边创建完成</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808031126088.cd3ecb19.png" alt="image-20220808031126088"></p><p>现在我们就可以同时添加数据和删除了</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">	<span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token class-name">AccountRepository</span> accountRepository<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind11</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Account</span> account<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        account<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;itlils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        account<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;ydl666&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">AccountDetail</span> accountDetail<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">AccountDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        accountDetail<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token string">&quot;13000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        accountDetail<span class="token punctuation">.</span><span class="token function">setRealName</span><span class="token punctuation">(</span><span class="token string">&quot;itlils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        accountDetail<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;cn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        accountDetail<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">&quot;123@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        account<span class="token punctuation">.</span><span class="token function">setDetail</span><span class="token punctuation">(</span>accountDetail<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Account</span> save <span class="token operator">=</span> accountRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;插入之后account id为：&quot;</span><span class="token operator">+</span>save<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;|||accountDetail id&quot;</span><span class="token operator">+</span>save<span class="token punctuation">.</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808031623110.16ebb4ef.png" alt="image-20220808031623110"></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind12</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        accountRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808031753444.869561f0.png" alt="image-20220808031753444"></p><p>两表都没了数据</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808031813618.b4fdf42b.png" alt="image-20220808031813618"></p><h2 id="第八章-一对多关系" tabindex="-1"><a class="header-anchor" href="#第八章-一对多关系"><span>第八章 一对多关系</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">@OneToMany:</span>
<span class="line">   	作用：建立一对多的关系映射</span>
<span class="line">    属性：</span>
<span class="line">    	targetEntityClass：指定多的多方的类的字节码</span>
<span class="line">    	mappedBy：指定从表实体类中引用主表对象的名称。</span>
<span class="line">    	cascade：指定要使用的级联操作</span>
<span class="line">    	fetch：指定是否采用延迟加载</span>
<span class="line">    	orphanRemoval：是否使用孤儿删除</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808033918256.805b5da7.png" alt="image-20220808033918256"></p><p>实体 Author：作者。</p><p>实体 Article：文章。</p><p>Author 和 Article 是一对多关系(双向)。那么在<a href="https://liuyanzhao.com/tag/jpa/" target="_blank" rel="noopener noreferrer">JPAopen in new window</a>中，如何表示一对多的双向关联呢？</p><p><a href="https://liuyanzhao.com/tag/jpa/" target="_blank" rel="noopener noreferrer">JPAopen in new window</a>使用@OneToMany和@ManyToOne来标识一对多的双向关联。一端(Author)使用@OneToMany,多端(Article)使用@ManyToOne。</p><p>在<a href="https://liuyanzhao.com/tag/jpa/" target="_blank" rel="noopener noreferrer">JPAopen in new window</a>规范中，一对多的双向关系由多端(Article)来维护。就是说多端(Article)为关系维护端，负责关系的增删改查。一端(Author)则为关系被维护端，不能维护关系。</p><p>一端(Author)使用@OneToMany注释的mappedBy=&quot;author&quot;属性表明Author是关系被维护端。</p><p>多端(Article)使用@ManyToOne和@JoinColumn来注释属性 author,@ManyToOne表明Article是多端，@JoinColumn设置在article表中的关联字段(外键)。</p><p>代码：</p><p>Author</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * @Created by IT李老师</span>
<span class="line"> * 公主号 “元动力课堂”</span>
<span class="line"> * 个人微 itlils</span>
<span class="line"> */</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span>   <span class="token comment">//表示这个类是一个实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;author&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//对应的数据库中表名称</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token annotation punctuation">@Id</span> <span class="token comment">// 主键</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span> <span class="token comment">// 自增长策略</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span> <span class="token comment">//id</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//姓名</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span>cascade<span class="token operator">=</span><span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span>fetch<span class="token operator">=</span><span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">LAZY</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//级联保存、更新、删除、刷新;延迟加载。当删除用户，会级联删除该用户的所有文章</span></span>
<span class="line">    <span class="token comment">//拥有mappedBy注解的实体类为关系被维护端</span></span>
<span class="line">    <span class="token comment">//mappedBy=&quot;author&quot;中的author是Article中的author属性</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articleList<span class="token punctuation">;</span><span class="token comment">//文章列表</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Article</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * @Created by IT李老师</span>
<span class="line"> * 公主号 “元动力课堂”</span>
<span class="line"> * 个人微 itlils</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span>   <span class="token comment">//表示这个类是一个实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;article&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//对应的数据库中表名称</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Id</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span> <span class="token comment">// 自增长策略</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token comment">// 映射为字段，值不能为空</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Lob</span>  <span class="token comment">// 大对象，映射 MySQL 的 Long Text 类型</span></span>
<span class="line">    <span class="token annotation punctuation">@Basic</span><span class="token punctuation">(</span>fetch <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">LAZY</span><span class="token punctuation">)</span> <span class="token comment">// 懒加载</span></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 映射为字段，值不能为空</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//文章全文内容</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@ManyToOne</span><span class="token punctuation">(</span>cascade<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">MERGE</span><span class="token punctuation">,</span><span class="token class-name">CascadeType</span><span class="token punctuation">.</span><span class="token constant">REFRESH</span><span class="token punctuation">}</span><span class="token punctuation">,</span>optional<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment">//可选属性optional=false,表示author不能为空。删除文章，不影响用户</span></span>
<span class="line">    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;author_id&quot;</span><span class="token punctuation">)</span><span class="token comment">//设置在article表中的关联字段(外键)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Author</span> author<span class="token punctuation">;</span><span class="token comment">//所属作者</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试： 运行，建表</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808034143395.6a29559f.png" alt="image-20220808034143395"></p><p>新增：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token class-name">AuthorRepository</span> authorRepository<span class="token punctuation">;</span></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token class-name">ArticleRepository</span> articleRepository<span class="token punctuation">;</span></span>
<span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind13</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Author</span> author<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Author</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        author<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itlils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Author</span> author1 <span class="token operator">=</span> authorRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Article</span> article1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article1<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article1<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article1<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span>author1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        articleRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>article1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Article</span> article2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article2<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article2<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;22222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        article2<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span>author1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        articleRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>article2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808034855141.ce3b9000.png" alt="image-20220808034855141"></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAABBCAYAAADGxNbFAAAEjklEQVR4nO3cvW8jRRgG8Gc4JIsCpUmEKChO4fBpZxvqExVX5BooYAeRNlfeCRokqHYskChoDt2VuX9gRymuOgpa6hTsLAk5i+IqlBRxGZ2QKfwVO7GdXa9fr+3nJ7mwvX49ip7Mx2rG6vz8vI0Vdnp6iq2trUU3gwC8tegG0Ppg2EiMWvVhlKqDPRuJYdhIzNvj3tjY2MhdrNls4r+ND2ZqkLRbrdfY3t5edDMqqdlslvq3Yc9GYhg2EsOwkRiGjcQwbCRmrmF7uVdD/d6POJl4VYan92qo7x3MsylUAXMMW4ZXR/OrTstn7H222QV4/McFHs/vC2jJcM5GYuTnbC92Ud+qDR6Vmqt5WK2gjIO3Gkqp7sPAXXfdmPeduaaGtvDAlLoAvIVW6srnVoFsz/ZiF/WHB9jZv8DxaefxBD/h2d+irZjOGRgkaLfbaLcTRHAwZhALbxtA0u6+nyIOHMxoKC7XSGMEWQOhUggzO7YunIEKHaL0Um00EK5I4ATDdoBvHh5g+7tD/Pr54NUHzw/x6CO5VtxIECOxuvskQhwHgHP9XkjbBP23oWFtBGQZsnE1tIWNOrWSJOrXjSIA3neD5GGtQ5T44dpJjCBzcCuQtjkuEEYcZTgBcKceiH1lYVpDT7nEGQUzNAZGwxdcVyMIEAw9DdDvsryDy4DMKKhrvi/LgKmNqjguEHJzMErBuAhJuzvcJdH0j91Q1B+ehx8lfsXCyIXtboA7AE6Os5E3/sKrqs3ZJnEODgHiNOn3Zd6XMMZ1e8JSalWUYM/2BXY+A5q/7OLppZu9L/d28ZtcI0qSdYY1APAWpjH6D1REZ26YNcLh4dlbaHNlzbqU5OZsAB48vwD2avj2kxqedV/b2T/Eo6OP+88rL0qQxhphb24VxEiTCKGZvbS2Hiku1e7V9yswhmLCgRfu1CXu1KWlxbCRGIaNxDBsJIZhIzFjV6NnZ2fSbaEKKnM1OvY+W5FbGLdar/Hh/puZGiTt/Pv3C93mWQetVqvUehxGSQzDRmIYNhLDsJEYho3E5Apbfas2r3ZUhjMKKmxM3fM/et2051SgZ1u2wOn7t9HeffeGV/vBPrVcin5uvRQaRpcicO9tIv35LtJP87RVI047p6EG2/1728Dzfo5GFZ6zVTlw+v5ttL8GvvrhCObPRbeGemZaIFQ1cP73f6CenBWaL12ea/lG2D9I7Ezn0HDYuL7q9Dlap4fsHT5ekZ3eucy8Gq1q4Mqg47R7mHhw6imNiwyUDkYZZDbtn5aKsvVbPMx8BuH49KKMdqw23znAHASDoEZxvLj2LMhMPRuDdkP6S0Sat0MKh41By6O3WrXQ3iJU6xm6QmFj0ArSMdLeCXpv0VizRULusK1r0LJshn7IN2CurGI19BL87EmZcoVtPYPW+eUhb8OJtz4m0jEiHw5+c81ksGmKQgvbJTZ2W/i/b97JXYw7dVdLq9Uq9W/DXR8khmEjMQwbiWHYSAzDRmJKP6S8ubk5U4OoWspcjZb6+2xEk3AYJTEMG4lh2EgMw0ZiGDYSw7CRGIaNxDBsJOZ/X2u6kFybUVUAAAAASUVORK5CYII=" alt="image-20220808034909693"></p><p><img src="data:image/png;base64,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" alt="image-20220808034902467"></p><p>删除：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind14</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        articleRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="data:image/png;base64,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" alt="image-20220808035211758"></p><p>查询：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">    @Transactional</span>
<span class="line">    @Test</span>
<span class="line">    public void testFind15() {</span>
<span class="line">        Optional&lt;Author&gt; byId = authorRepository.findById(1L);</span>
<span class="line">        if (byId.isPresent()){</span>
<span class="line">            Author author = byId.get();</span>
<span class="line">            List&lt;Article&gt; articleList = author.getArticleList();</span>
<span class="line">            System.out.println(articleList);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1<img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808035632321.2702cec6.png" alt="image-20220808035632321"></p><p>解决方案：</p><p>作者 fetch=FetchType.EAGER</p><p>2、</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808041032681.1efb73a0.png" alt="image-20220808041032681"></p><p>解决方案：循环tostring 破坏一方的tostring即可。文章@ToString(exclude = {&quot;author&quot;})</p><p>解决后：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808041147266.bb1216a1.png" alt="image-20220808041147266"></p><h2 id="第九章-多对多-关系" tabindex="-1"><a class="header-anchor" href="#第九章-多对多-关系"><span>第九章 多对多 关系</span></a></h2><p>实体 User：用户。</p><p>实体 Authority：权限。</p><p>用户和权限是多对多的关系。一个用户可以有多个权限，一个权限也可以被很多用户拥有。</p><p><a href="https://liuyanzhao.com/tag/jpa/" target="_blank" rel="noopener noreferrer">JPAopen in new window</a>中使用@ManyToMany来注解多对多的关系，由一个关联表来维护。这个关联表的表名默认是：主表名+下划线+从表名。(主表是指关系维护端对应的表,从表指关系被维护端对应的表)。这个关联表只有两个外键字段，分别指向主表ID和从表ID。字段的名称默认为：主表名+下划线+主表中的主键列名，从表名+下划线+从表中的主键列名。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808041745146.aefc67ff.png" alt="image-20220808041745146"></p><p>需要注意的：</p><p>1、多对多关系中一般不设置级联保存、级联删除、级联更新等操作。</p><p>2、可以随意指定一方为关系维护端，在这个例子中，我指定 User 为关系维护端，所以生成的关联表名称为： user_authority，关联表的字段为：user_id 和 authority_id。</p><p>3、多对多关系的绑定由关系维护端来完成，即由 User.setAuthorities(authorities) 来绑定多对多的关系。关系被维护端不能绑定关系，即User不能绑定关系。</p><p>4、多对多关系的解除由关系维护端来完成，即由Authority.getUser().remove(user)来解除多对多的关系。关系被维护端不能解除关系，即Authority不能解除关系。</p><p>5、如果 User 和 Authority 已经绑定了多对多的关系，那么不能直接删除 Authority，需要由 User 解除关系后，才能删除 Authority。但是可以直接删除 User，因为 User 是关系维护端，删除 User 时，会先解除 User 和 Authority 的关系，再删除 Authority。</p><p>Users</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * @Created by IT李老师</span>
<span class="line"> * 公主号 “元动力课堂”</span>
<span class="line"> * 个人微 itlils</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span> <span class="token comment">//这是实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span> <span class="token comment">//对应哪张表</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Users</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Id</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span> unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span> <span class="token comment">// 用户账号，用户登录时的唯一标识</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>length <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span> <span class="token comment">// 登录时密码</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@ManyToMany</span></span>
<span class="line">    <span class="token annotation punctuation">@JoinTable</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user_authority&quot;</span><span class="token punctuation">,</span>joinColumns <span class="token operator">=</span> <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            inverseJoinColumns <span class="token operator">=</span> <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;authority_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//1、关系维护端，负责多对多关系的绑定和解除</span></span>
<span class="line">    <span class="token comment">//2、@JoinTable注解的name属性指定关联表的名字，joinColumns指定外键的名字，关联到关系维护端(User)</span></span>
<span class="line">    <span class="token comment">//3、inverseJoinColumns指定外键的名字，要关联的关系被维护端(Authority)</span></span>
<span class="line">    <span class="token comment">//4、其实可以不使用@JoinTable注解，默认生成的关联表名称为主表表名+下划线+从表表名，</span></span>
<span class="line">    <span class="token comment">//即表名为user_authority</span></span>
<span class="line">    <span class="token comment">//关联到主表的外键名：主表名+下划线+主表中的主键列名,即user_id</span></span>
<span class="line">    <span class="token comment">//关联到从表的外键名：主表中用于关联的属性名+下划线+从表的主键列名,即authority_id</span></span>
<span class="line">    <span class="token comment">//主表就是关系维护端对应的表，从表就是关系被维护端对应的表</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Authority</span><span class="token punctuation">&gt;</span></span> authorityList<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Authority</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>jpa<span class="token punctuation">.</span>ydljpa<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * @Created by IT李老师</span>
<span class="line"> * 公主号 “元动力课堂”</span>
<span class="line"> * 个人微 itlils</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Data</span></span>
<span class="line"><span class="token annotation punctuation">@Entity</span> <span class="token comment">//这是实体类</span></span>
<span class="line"><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;authority&quot;</span><span class="token punctuation">)</span> <span class="token comment">//对应哪张表</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Authority</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Id</span></span>
<span class="line">    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span> <span class="token comment">//权限名</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@ManyToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">&quot;authorityList&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Users</span><span class="token punctuation">&gt;</span></span> userList<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试：添加</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">UsersRepository</span> usersRepository<span class="token punctuation">;</span></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">AuthorityRepository</span> authorityRepository<span class="token punctuation">;</span></span>
<span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind16</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Authority</span> authority <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Authority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        authority<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        authority<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ROLE_ADMIN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        authorityRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>authority<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind17</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Users</span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        users<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;itlils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        users<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Authority</span> authority <span class="token operator">=</span> authorityRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Authority</span><span class="token punctuation">&gt;</span></span> authorityList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        authorityList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>authority<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        users<span class="token punctuation">.</span><span class="token function">setAuthorityList</span><span class="token punctuation">(</span>authorityList<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        usersRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>先运行 saveAuthority 添加一条权限记录，</p><p>然后运行 saveUser 添加一条用户记录，与此同时，user_authority 表中也自动插入了一条记录</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808042812330.27487702.png" alt="image-20220808042812330"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808042832949.2f558552.png" alt="image-20220808042832949"></p><p>测试 删除</p><p>删除用户</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">    <span class="token annotation punctuation">@Test</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFind18</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        usersRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>user 表中删除一条记录，同时 user_authority 能够级联删除一条记录</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20220808042939402.ec8d4773.png" alt="image-20220808042939402"></p><p>中间表和users表数据都删除了</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 2506956864@qq.com">zqb</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/blogs/assets/app-lCTfir8o.js" defer></script>
  </body>
</html>
