<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/lucy.ico"><title>反射 | 彗星文档</title><meta name="description" content="繁星似海 熠熠生辉">
    <link rel="preload" href="/assets/style-CPtAZutf.css" as="style"><link rel="stylesheet" href="/assets/style-CPtAZutf.css">
    <link rel="modulepreload" href="/assets/app-CiSBoDQ3.js"><link rel="modulepreload" href="/assets/reflection.html-CC70fnyj.js">
    <link rel="prefetch" href="/assets/about.html-wV2yNvuu.js" as="script"><link rel="prefetch" href="/assets/index.html-BYnnuSRx.js" as="script"><link rel="prefetch" href="/assets/activiti.html-Cb_jK_iq.js" as="script"><link rel="prefetch" href="/assets/index.html-DdsBykgo.js" as="script"><link rel="prefetch" href="/assets/css.html-CwCx0R0j.js" as="script"><link rel="prefetch" href="/assets/index.html-Ckud_eAb.js" as="script"><link rel="prefetch" href="/assets/datastructure.html-DcWEnLSc.js" as="script"><link rel="prefetch" href="/assets/index.html-CPQzaKp9.js" as="script"><link rel="prefetch" href="/assets/design.html-2FzvzKOk.js" as="script"><link rel="prefetch" href="/assets/index.html-JnI1BS5-.js" as="script"><link rel="prefetch" href="/assets/docker.html-Br3fXjmj.js" as="script"><link rel="prefetch" href="/assets/index.html-DfqN304W.js" as="script"><link rel="prefetch" href="/assets/elk1.html-B3oAIOxw.js" as="script"><link rel="prefetch" href="/assets/index.html-BiyOKAJn.js" as="script"><link rel="prefetch" href="/assets/elk2.html-CnHJFV9b.js" as="script"><link rel="prefetch" href="/assets/index.html-CJDBS2wV.js" as="script"><link rel="prefetch" href="/assets/html.html-D_mk2K_S.js" as="script"><link rel="prefetch" href="/assets/index.html-bWKnOvj3.js" as="script"><link rel="prefetch" href="/assets/abnormal.html-B3EwKTlY.js" as="script"><link rel="prefetch" href="/assets/api.html-BCTmaCdl.js" as="script"><link rel="prefetch" href="/assets/base.html-boeFwZlx.js" as="script"><link rel="prefetch" href="/assets/encapsulation.html-DjUI5-I-.js" as="script"><link rel="prefetch" href="/assets/Inheritance.html-clo1QiSy.js" as="script"><link rel="prefetch" href="/assets/JVM.html-Bq5SIjE7.js" as="script"><link rel="prefetch" href="/assets/other.html-CF2BLrRW.js" as="script"><link rel="prefetch" href="/assets/polymorphism.html-BgaWnHHM.js" as="script"><link rel="prefetch" href="/assets/index.html-CDcVLcEi.js" as="script"><link rel="prefetch" href="/assets/collection.html-i0k9SgMj.js" as="script"><link rel="prefetch" href="/assets/enum.html-DDCsi4Z-.js" as="script"><link rel="prefetch" href="/assets/format.html-CbNdZn9y.js" as="script"><link rel="prefetch" href="/assets/Generics.html-hU5FsvzJ.js" as="script"><link rel="prefetch" href="/assets/iostream.html-Db8Rc5Zy.js" as="script"><link rel="prefetch" href="/assets/NIO.html-DBlS8bNK.js" as="script"><link rel="prefetch" href="/assets/index.html-TBbOdnEb.js" as="script"><link rel="prefetch" href="/assets/socket.html-CLiBd0gb.js" as="script"><link rel="prefetch" href="/assets/thread.html-DMburY4V.js" as="script"><link rel="prefetch" href="/assets/tree.html-COhv9VtZ.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-1CBYwwq-.js" as="script"><link rel="prefetch" href="/assets/index.html-CueiqX14.js" as="script"><link rel="prefetch" href="/assets/js.html-C9_NLBnY.js" as="script"><link rel="prefetch" href="/assets/index.html-C9mPge9P.js" as="script"><link rel="prefetch" href="/assets/log.html-Dh0Da6Hc.js" as="script"><link rel="prefetch" href="/assets/index.html-yLFEegXw.js" as="script"><link rel="prefetch" href="/assets/maven.html-DOdAv6Dm.js" as="script"><link rel="prefetch" href="/assets/index.html-CK3XceL4.js" as="script"><link rel="prefetch" href="/assets/message.html-CdC4TXuL.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Sxc9Up.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-DYWn_zKL.js" as="script"><link rel="prefetch" href="/assets/index.html-BIXAmUnG.js" as="script"><link rel="prefetch" href="/assets/mybatisplus.html-BMO44mtw.js" as="script"><link rel="prefetch" href="/assets/index.html-k_2IJtM3.js" as="script"><link rel="prefetch" href="/assets/mysql-rise.html-CJy7CAtY.js" as="script"><link rel="prefetch" href="/assets/index.html-CpMHL-FV.js" as="script"><link rel="prefetch" href="/assets/mysql-base.html-BblyU_z5.js" as="script"><link rel="prefetch" href="/assets/index.html-Bul-465b.js" as="script"><link rel="prefetch" href="/assets/nginx.html-Bf-he9CQ.js" as="script"><link rel="prefetch" href="/assets/index.html-rjZyarl0.js" as="script"><link rel="prefetch" href="/assets/archive1.html-DHoF1GVt.js" as="script"><link rel="prefetch" href="/assets/archive2.html-CaMpKLlM.js" as="script"><link rel="prefetch" href="/assets/article1.html-C7wj3Hnv.js" as="script"><link rel="prefetch" href="/assets/article10.html-BtPemjqh.js" as="script"><link rel="prefetch" href="/assets/article11.html-DBFUN38F.js" as="script"><link rel="prefetch" href="/assets/article12.html-Dzwejx3Q.js" as="script"><link rel="prefetch" href="/assets/article2.html-BYw8UrU9.js" as="script"><link rel="prefetch" href="/assets/article3.html-D7169oIX.js" as="script"><link rel="prefetch" href="/assets/article4.html-DiEowTEu.js" as="script"><link rel="prefetch" href="/assets/article5.html-C1N4DckH.js" as="script"><link rel="prefetch" href="/assets/article6.html-BN6iWA0i.js" as="script"><link rel="prefetch" href="/assets/article7.html-BENraJ5c.js" as="script"><link rel="prefetch" href="/assets/article8.html-DZ7RCxf7.js" as="script"><link rel="prefetch" href="/assets/article9.html-DyuvOqau.js" as="script"><link rel="prefetch" href="/assets/sticky.html-BNm6Btrk.js" as="script"><link rel="prefetch" href="/assets/sticky2.html-BKsRDd3r.js" as="script"><link rel="prefetch" href="/assets/questions.html-reTBywrv.js" as="script"><link rel="prefetch" href="/assets/index.html-NLEllAin.js" as="script"><link rel="prefetch" href="/assets/index.html-Dp-yObq6.js" as="script"><link rel="prefetch" href="/assets/redis.html-B5tiJguG.js" as="script"><link rel="prefetch" href="/assets/rabbitmq.html-HJNn-_qX.js" as="script"><link rel="prefetch" href="/assets/index.html-hRD04cS1.js" as="script"><link rel="prefetch" href="/assets/index.html-bBc3H7qI.js" as="script"><link rel="prefetch" href="/assets/rocketmq.html-BBIVwRGw.js" as="script"><link rel="prefetch" href="/assets/buy1.html-6OjYnxlq.js" as="script"><link rel="prefetch" href="/assets/index.html-DazXYzH-.js" as="script"><link rel="prefetch" href="/assets/buy2.html-eI4dxe1r.js" as="script"><link rel="prefetch" href="/assets/index.html-CuQYXhsJ.js" as="script"><link rel="prefetch" href="/assets/buy3.html-C5KdoHEF.js" as="script"><link rel="prefetch" href="/assets/index.html-ClZxc1st.js" as="script"><link rel="prefetch" href="/assets/index.html-BDlpmZ9-.js" as="script"><link rel="prefetch" href="/assets/sort.html-BQs0X5fF.js" as="script"><link rel="prefetch" href="/assets/index.html-CCcFhZPa.js" as="script"><link rel="prefetch" href="/assets/spring.html-B84j2uGJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CJ7G0l91.js" as="script"><link rel="prefetch" href="/assets/springboot.html-6bL431Xo.js" as="script"><link rel="prefetch" href="/assets/index.html-v7I1pr8g.js" as="script"><link rel="prefetch" href="/assets/springcloudalibaba.html-t2WNLzKd.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu1uLPky.js" as="script"><link rel="prefetch" href="/assets/springcloud.html-DYMN4LP5.js" as="script"><link rel="prefetch" href="/assets/index.html-DBwvEGhD.js" as="script"><link rel="prefetch" href="/assets/springdata-jpa.html-B9rkwgnb.js" as="script"><link rel="prefetch" href="/assets/index.html-BSk2K6RS.js" as="script"><link rel="prefetch" href="/assets/springmvc.html-Dj3KfPKx.js" as="script"><link rel="prefetch" href="/assets/index.html-VnyIy73e.js" as="script"><link rel="prefetch" href="/assets/springsecurity.html-pai0Fncc.js" as="script"><link rel="prefetch" href="/assets/index.html-BBwTmuaT.js" as="script"><link rel="prefetch" href="/assets/ssm.html--LJ51UoR.js" as="script"><link rel="prefetch" href="/assets/index.html-ChyaU-q1.js" as="script"><link rel="prefetch" href="/assets/linux.html-x7t9EqDd.js" as="script"><link rel="prefetch" href="/assets/index.html-BDWR3jgj.js" as="script"><link rel="prefetch" href="/assets/git.html-BTH3_mHD.js" as="script"><link rel="prefetch" href="/assets/index.html-BaRVV2Lg.js" as="script"><link rel="prefetch" href="/assets/index.html-DwkhEwFN.js" as="script"><link rel="prefetch" href="/assets/web.html-BQMzalyu.js" as="script"><link rel="prefetch" href="/assets/404.html-BQmZJoxb.js" as="script"><link rel="prefetch" href="/assets/index.html-B3-U4brV.js" as="script"><link rel="prefetch" href="/assets/index.html--TZaAjDD.js" as="script"><link rel="prefetch" href="/assets/index.html-B4yllirZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DPYrzjiL.js" as="script"><link rel="prefetch" href="/assets/index.html-x3X7peOq.js" as="script"><link rel="prefetch" href="/assets/index.html-CdffHRxP.js" as="script"><link rel="prefetch" href="/assets/index.html-D-yEg0ev.js" as="script"><link rel="prefetch" href="/assets/index.html-0u-R21Sg.js" as="script"><link rel="prefetch" href="/assets/index.html-BFtfDIz1.js" as="script"><link rel="prefetch" href="/assets/index.html-DodGeBLO.js" as="script"><link rel="prefetch" href="/assets/index.html-ehzR16_a.js" as="script"><link rel="prefetch" href="/assets/index.html-YpqYXRC0.js" as="script"><link rel="prefetch" href="/assets/index.html-DoLH-5c5.js" as="script"><link rel="prefetch" href="/assets/index.html-BlQrOYeY.js" as="script"><link rel="prefetch" href="/assets/index.html-DhefNKm3.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/comet.png" alt="彗星文档"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">彗星文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about.html" aria-label="关于"><!---->关于<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/study-direction/" aria-label="学习路线"><!---->学习路线<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE上</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/JavaSE1/" aria-label="1.基础~8.异常处理"><!---->1.基础~8.异常处理<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>JavaSE下</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/JavaSE2/" aria-label="9.泛型~18.正则表达式"><!---->9.泛型~18.正则表达式<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="运维工具"><span class="title">运维工具</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>虚拟机</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/virtual-system/" aria-label="Linux"><!---->Linux<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>多人协同</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/tools/" aria-label="Git"><!---->Git<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>镜像</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/docker/" aria-label="Docker"><!---->Docker<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>工作流</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/activiti/" aria-label="Activiti工作流引擎"><!---->Activiti工作流引擎<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="数据库"><span class="title">数据库</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="数据库"><span class="title">数据库</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>MySQL</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql1/" aria-label="MySQL上"><!---->MySQL上<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mysql2/" aria-label="MySQL下"><!---->MySQL下<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jdbc/" aria-label="1.JDBC"><!---->1.JDBC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/html/" aria-label="2.HTML"><!---->2.HTML<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/css/" aria-label="3.CSS"><!---->3.CSS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/js/" aria-label="4.JS"><!---->4.JS<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/web/" aria-label="5.Web"><!---->5.Web<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/log/" aria-label="1.日志"><!---->1.日志<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/maven/" aria-label="2.Maven"><!---->2.Maven<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/design/" aria-label="3.设计模式"><!---->3.设计模式<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis/" aria-label="4.MyBatis"><!---->4.MyBatis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/spring/" aria-label="5.Spring"><!---->5.Spring<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springmvc/" aria-label="6.SpringMVC"><!---->6.SpringMVC<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mybatis-plus/" aria-label="7.MyBatisPlus"><!---->7.MyBatisPlus<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/redis/" aria-label="8.Redis"><!---->8.Redis<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springboot/" aria-label="9.SpringBoot"><!---->9.SpringBoot<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springdata-jpa/" aria-label="10.SpringData-jpa"><!---->10.SpringData-jpa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springsecurity/" aria-label="11.SpringSecurity"><!---->11.SpringSecurity<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="分布式组件"><span class="title">分布式组件</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/nginx/" aria-label="1.Nginx"><!---->1.Nginx<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud/" aria-label="2.SpringCloud"><!---->2.SpringCloud<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/springcloud-alibaba/" aria-label="3.SprngCloud-AliBaBa"><!---->3.SprngCloud-AliBaBa<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk1/" aria-label="4.ELK(上)"><!---->4.ELK(上)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/elk2/" aria-label="5.ELK(下)"><!---->5.ELK(下)<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rocketmq/" aria-label="6.RocketMQ"><!---->6.RocketMQ<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/rabbitmq/" aria-label="7.RabbitMQ"><!---->7.RabbitMQ<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="项目"><span class="title">项目</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="项目"><span class="title">项目</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>综合项目</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ssm/" aria-label="1.SSM小项目"><!---->1.SSM小项目<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/message/" aria-label="2.短信调度"><!---->2.短信调度<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping1/" aria-label="二手交易网(上)"><!---->二手交易网(上)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping2/" aria-label="二手交易网(中)"><!---->二手交易网(中)<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/shopping3/" aria-label="二手交易网(下)"><!---->二手交易网(下)<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="算法"><span class="title">算法</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="算法"><span class="title">算法</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/sort/" aria-label="1.排序算法"><!---->1.排序算法<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/datastructure/" aria-label="2.基本数据结构与算法"><!---->2.基本数据结构与算法<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/question/" aria-label="遇到的问题"><!---->遇到的问题<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">目录 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/Generics.html" aria-label="9.泛型"><!---->9.泛型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/enum.html" aria-label="10.枚举"><!---->10.枚举<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/thread.html" aria-label="11.多线程"><!---->11.多线程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/tree.html" aria-label="12.树"><!---->12.树<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/collection.html" aria-label="13.集合"><!---->13.集合<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/iostream.html" aria-label="14.IO流"><!---->14.IO流<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/JavaSE2/reflection.html" aria-label="15.反射"><!---->15.反射<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/socket.html" aria-label="16.socket网络编程"><!---->16.socket网络编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/nio.html" aria-label="17.NIO网络编程"><!---->17.NIO网络编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JavaSE2/format.html" aria-label="18.正则表达式"><!---->18.正则表达式<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="反射" tabindex="-1"><a class="header-anchor" href="#反射"><span>反射</span></a></h1><h2 id="一、注解" tabindex="-1"><a class="header-anchor" href="#一、注解"><span>一、注解</span></a></h2><p>Java 注解（Annotation）又称 Java 标注，是 JDK5.0 引入的一种机制。Java 语言中的类、方法、变量、参数和包等都可以被标注。</p><h3 id="_1、annotation-的定义" tabindex="-1"><a class="header-anchor" href="#_1、annotation-的定义"><span>1、Annotation 的定义</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">SOURCE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Override</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Documented</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">FunctionalInterface</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们仿照jdk自带注解的方式，自己定义一个注解：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnnotation</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果发现这个注解确实可以使用了，同时我们看到了这几个注解<code>@Retention</code> 和 <code>@Target</code> 这两个注解专门给注解加注解，我们称之为元注解。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912144431542.f8328a4c.png" alt="image-20210912144431542"></p><p>再来分析，我们不妨看看那几个元注解的源码：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Documented</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Retention</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * Returns the retention policy.</span>
<span class="line">     * <span class="token keyword">@return</span> the retention policy</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token class-name">RetentionPolicy</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们发现注解中可以有方法，我们在注解中可以这样定义方法：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnnotation</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;jerry&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们在使用的时候就可以这样使用了：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912144933048.edc694ed.png" alt="image-20210912144933048"></p><p>关于注解方法，有以下几点注意的：</p><p>1、定义的格式是：String name();</p><p>2、可以有默认值，也可以没有，如果没有默认值在使用的时候必须填写对应的值。默认值使用default添加。</p><p>3、如果想在使用的时候不指定具体的名字，方法名字定义为value() 即可。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">public @interface MyAnnotation {</span>
<span class="line">    String name() default &quot;jerry&quot;;</span>
<span class="line">    int value();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912145304383.521ebb51.png" alt="image-20210912145304383"></p><p>看到这里，有人可能会问，注解到底有什么用？如果我们没有学习反射，对我们而言，注解确实没什么用，哈哈哈，后边我们结合反射会有例子讲解。</p><h3 id="_2、annotation-组成部分" tabindex="-1"><a class="header-anchor" href="#_2、annotation-组成部分"><span>2、Annotation 组成部分</span></a></h3><p>我们使用javap查看生成的注解类：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token constant">PS</span> <span class="token class-name">D</span><span class="token operator">:</span>\code\test\out\production\test\com\ydlclass\chat<span class="token operator">&gt;</span> javap <span class="token operator">-</span>v <span class="token punctuation">.</span>\<span class="token class-name">MyAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span></span>
<span class="line"><span class="token class-name">Classfile</span> <span class="token operator">/</span><span class="token class-name">D</span><span class="token operator">:</span><span class="token operator">/</span>code<span class="token operator">/</span>test<span class="token operator">/</span>out<span class="token operator">/</span>production<span class="token operator">/</span>test<span class="token operator">/</span>com<span class="token operator">/</span>ydlclass<span class="token operator">/</span>chat<span class="token operator">/</span><span class="token class-name">MyAnnotation</span><span class="token punctuation">.</span><span class="token keyword">class</span></span>
<span class="line">  <span class="token class-name">Last</span> modified <span class="token number">2021</span><span class="token operator">-</span><span class="token number">9</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">;</span> size <span class="token number">482</span> bytes</span>
<span class="line">  <span class="token constant">MD5</span> checksum <span class="token number">5</span>b096a2faeef11535277c9cdbe5703d0</span>
<span class="line">  <span class="token class-name">Compiled</span> from <span class="token string">&quot;MyAnnotation.java&quot;</span></span>
<span class="line">  <span class="token comment">//我们发现字节码中注解其实也是一个接口统一继承自java.lang.annotation.Annotation</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>ydlclass<span class="token punctuation">.</span>chat<span class="token punctuation">.</span></span>MyAnnotation</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>Annotation</span></span>
<span class="line">  minor version<span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">  major version<span class="token operator">:</span> <span class="token number">52</span></span>
<span class="line">  flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span><span class="token punctuation">,</span> <span class="token constant">ACC_INTERFACE</span><span class="token punctuation">,</span> <span class="token constant">ACC_ABSTRACT</span><span class="token punctuation">,</span> <span class="token constant">ACC_ANNOTATION</span></span>
<span class="line"><span class="token class-name">Constant</span> pool<span class="token operator">:</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 生成了两个抽象方法</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span></span>
<span class="line">    flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span><span class="token punctuation">,</span> <span class="token constant">ACC_ABSTRACT</span></span>
<span class="line">    <span class="token class-name">AnnotationDefault</span><span class="token operator">:</span></span>
<span class="line">      default_value<span class="token operator">:</span> s#<span class="token number">7</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">I</span></span>
<span class="line">    flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span><span class="token punctuation">,</span> <span class="token constant">ACC_ABSTRACT</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">SourceFile</span><span class="token operator">:</span> <span class="token string">&quot;MyAnnotation.java&quot;</span></span>
<span class="line"><span class="token class-name">RuntimeVisibleAnnotations</span><span class="token operator">:</span></span>
<span class="line">  <span class="token number">0</span><span class="token operator">:</span> #<span class="token function">13</span><span class="token punctuation">(</span>#<span class="token number">8</span><span class="token operator">=</span><span class="token punctuation">[</span>e#<span class="token number">14.</span>#<span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token number">1</span><span class="token operator">:</span> #<span class="token function">16</span><span class="token punctuation">(</span>#<span class="token number">8</span><span class="token operator">=</span>e#<span class="token number">17.</span>#<span class="token number">18</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token constant">PS</span> <span class="token class-name">D</span><span class="token operator">:</span>\code\test\out\production\test\com\ydlclass\chat<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>java Annotation 的组成中，有 3 个非常重要的主干类。它们分别是：</p><h4 id="_1-annotation-java" tabindex="-1"><a class="header-anchor" href="#_1-annotation-java"><span>（1）Annotation.java</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Annotation</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Annotation</span><span class="token punctuation">&gt;</span></span> <span class="token function">annotationType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-elementtype-java" tabindex="-1"><a class="header-anchor" href="#_2-elementtype-java"><span>（2）ElementType.java</span></a></h4><p>ElementType 是 Enum 枚举类型，它用来指定 Annotation 的类型。大白话就是，说明了我的注解将来可以放在哪里。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ElementType</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 类、接口（包括注释类型）或枚举声明</span></span>
<span class="line">    <span class="token constant">TYPE</span><span class="token punctuation">,</span>          </span>
<span class="line">    <span class="token comment">//  字段声明（包括枚举常量</span></span>
<span class="line">    <span class="token constant">FIELD</span><span class="token punctuation">,</span>       </span>
<span class="line">    <span class="token comment">//  方法声明</span></span>
<span class="line">    <span class="token constant">METHOD</span><span class="token punctuation">,</span>       </span>
<span class="line">    <span class="token comment">//  参数声明</span></span>
<span class="line">    <span class="token constant">PARAMETER</span><span class="token punctuation">,</span>      </span>
<span class="line">    <span class="token comment">//  构造方法声明</span></span>
<span class="line">    <span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span>     </span>
<span class="line">    <span class="token comment">//  局部变量声明</span></span>
<span class="line">    <span class="token constant">LOCAL_VARIABLE</span><span class="token punctuation">,</span>  </span>
<span class="line">    <span class="token comment">//   注释类型声明</span></span>
<span class="line">    <span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">,</span>   </span>
<span class="line">    <span class="token comment">//  包声明</span></span>
<span class="line">    <span class="token constant">PACKAGE</span>      </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-retentionpolicy-java" tabindex="-1"><a class="header-anchor" href="#_3-retentionpolicy-java"><span>（3）RetentionPolicy.java</span></a></h4><p>RetentionPolicy 是 Enum 枚举类型，它用来指定 Annotation 的策略。通俗点说，就是不同 RetentionPolicy 类型的 Annotation 的作用域不同。</p><ol><li>若 Annotation 的类型为 SOURCE，则意味着：Annotation 仅存在于编译器处理期间，编译器处理完之后，该 Annotation 就没用了。 例如，&quot; @Override&quot; 标志就是一个 Annotation。当它修饰一个方法的时候，就意味着该方法覆盖父类的方法；并且在编译期间会进行语法检查！编译器处理完后，&quot;@Override&quot; 就没有任何作用了。</li><li>若 Annotation 的类型为 CLASS，则意味着：编译器将 Annotation 存储于类对应的 .class 文件中，它是 Annotation 的默认行为。</li><li>若 Annotation 的类型为 RUNTIME，则意味着：编译器将 Annotation 存储于 class 文件中，并且可由JVM读入。</li></ol><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">RetentionPolicy</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//Annotation信息仅存在于编译器处理期间，编译器处理完之后就没有该Annotation信息了</span></span>
<span class="line">    <span class="token constant">SOURCE</span><span class="token punctuation">,</span>       </span>
<span class="line">    <span class="token comment">//编译器将Annotation存储于类对应的.class文件中。但不会加载到JVM中。默认行为 </span></span>
<span class="line">    <span class="token constant">CLASS</span><span class="token punctuation">,</span>       </span>
<span class="line">    <span class="token comment">// 编译器将Annotation存储于class文件中，并且可由JVM读入，因此运行时我们可以获取。</span></span>
<span class="line">    <span class="token constant">RUNTIME</span>       </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_3、java-自带的-annotation" tabindex="-1"><a class="header-anchor" href="#_3、java-自带的-annotation"><span>3、Java 自带的 Annotation</span></a></h3><p>理解了上面的 3 个类的作用之后，我们接下来可以讲解 Annotation 实现类的语法定义了。</p><h4 id="_1-内置的注解" tabindex="-1"><a class="header-anchor" href="#_1-内置的注解"><span>（1）内置的注解</span></a></h4><p>Java 定义了一套注解，共有10 个，6个在 java.lang 中，剩下 4 个在 java.lang.annotation 中。</p><p>（1）作用在代码的注解是</p><ul><li>@Override - 检查该方法是否是重写方法。如果发现其父类，或者是引用的接口中并没有该方法时，会报编译错误。</li><li>@Deprecated - 标记过时方法。如果使用该方法，会报编译警告。</li><li>@SuppressWarnings - 指示编译器去忽略注解中声明的警告。</li><li>@SafeVarargs - Java 7 开始支持，忽略任何使用参数为泛型变量的方法或构造函数调用产生的警告。</li><li>@FunctionalInterface - Java 8 开始支持，标识一个匿名函数或函数式接口。</li><li>@Repeatable - Java 8 开始支持，标识某注解可以在同一个声明上使用多次。</li></ul><p>（2）作用在其他注解的注解(或者说 元注解)是:</p><ul><li>@Retention - 标识这个注解怎么保存，是只在代码中，还是编入class文件中，或者是在运行时可以通过反射访问。</li><li>@Documented - 标记这些注解是否包含在用户文档中。</li><li>@Target - 标记这个注解可以修饰哪些 Java 成员。</li><li>@Inherited - 如果一个类用上了@Inherited修饰的注解，那么其子类也会继承这个注解</li></ul><h4 id="_2-常用注解" tabindex="-1"><a class="header-anchor" href="#_2-常用注解"><span>（2）常用注解</span></a></h4><p>通过上面的示例，我们能理解：@interface 用来声明 Annotation，@Documented 用来表示该 Annotation 是否会出现在 javadoc 中， @Target 用来指定 Annotation 的类型，@Retention 用来指定 Annotation 的策略。</p><blockquote><p>@Documented 标记这些注解是否包含在用户文档中。</p></blockquote><blockquote><p>@Inherited</p></blockquote><p>@Inherited 的定义如下：加有该注解的注解会被子类继承，注意，仅针对<strong>类，成员属性</strong>、方法并不受此注释的影响。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Documented</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Inherited</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>@Deprecated</p></blockquote><p>@Deprecated 的定义如下：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Documented</span></span>
<span class="line"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Deprecated</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><p>@Deprecated 所标注内容，不再被建议使用。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912151947844.4c9221ab.png" alt="image-20210912151947844"></p><p>加上这个注解在使用或者重写时会有警告：</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912152418045.dc5d2a7f.png" alt="image-20210912152418045"></p><blockquote><p>@SuppressWarnings</p></blockquote><p>@SuppressWarnings 的定义如下：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">@Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE})</span>
<span class="line">@Retention(RetentionPolicy.SOURCE)</span>
<span class="line">public @interface SuppressWarnings {</span>
<span class="line">    String[] value();</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><p>SuppressWarnings 的作用是，让编译器对&quot;它所标注的内容&quot;的某些警告保持静默，用于抑制编译器产生警告信息。。例如，&quot;@SuppressWarnings(value={&quot;deprecation&quot;, &quot;unchecked&quot;})&quot; 表示对&quot;它所标注的内容&quot;中的 &quot;SuppressWarnings 不再建议使用警告&quot;和&quot;未检查的转换时的警告&quot;保持沉默。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912152848064.8391b39a.png" alt="image-20210912152848064"></p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912152804165.55414e89.png" alt="image-20210912152804165"></p><p>不用记，谁记谁傻X。</p><table><thead><tr><th><strong>关键字</strong></th><th><strong>用途</strong></th></tr></thead><tbody><tr><td>all</td><td>抑制所有警告</td></tr><tr><td>boxing</td><td>抑制装箱、拆箱操作时候的警告</td></tr><tr><td>fallthrough</td><td>抑制在switch中缺失breaks的警告</td></tr><tr><td>finally</td><td>抑制finally模块没有返回的警告</td></tr><tr><td>rawtypes</td><td>使用generics时忽略没有指定相应的类型</td></tr><tr><td>serial</td><td>忽略在serializable类中没有声明serialVersionUID变量</td></tr><tr><td>unchecked</td><td>抑制没有进行类型检查操作的警告</td></tr><tr><td>unused</td><td>抑制没被使用过的代码的警告</td></tr></tbody></table><h3 id="_4、annotation-的作用" tabindex="-1"><a class="header-anchor" href="#_4、annotation-的作用"><span>4、Annotation 的作用</span></a></h3><p>（1）Annotation 具有&quot;让编译器进行编译检查的作用“，这个讲了很多了。</p><p>（2）利用反射，和反射配合使用能产生奇妙的化学反应。</p><h2 id="二、反射" tabindex="-1"><a class="header-anchor" href="#二、反射"><span>二、反射</span></a></h2><p>我们都知道光是可以反射的，我们无法直接接触方法区中一个类的方法、属性、注解等，那就可以通过一面镜子观察它的全貌，这个镜子就是JDK给我们提供的Class类。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210913095552369.240c1aa8.png" alt="image-20210913095552369"></p><p>首先我们看一下Class这个类，初步简单的分析一下。我们发现这个类并没有什么成员变量，仅仅存在许多的方法，还有不少是本地方法。通过这些方法的名字我们大致能猜出，这个类能帮我们获取方法、构造器、属性、注解等。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 获得他实现的接口</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">ReflectionData</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> rd <span class="token operator">=</span> <span class="token function">reflectionData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>rd <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// no cloning required</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">getInterfaces0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> rd<span class="token punctuation">.</span>interfaces<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>interfaces <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                interfaces <span class="token operator">=</span> <span class="token function">getInterfaces0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                rd<span class="token punctuation">.</span>interfaces <span class="token operator">=</span> interfaces<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// defensively copy before handing over to user code</span></span>
<span class="line">            <span class="token keyword">return</span> interfaces<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">native</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getInterfaces0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   </span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 获得方法</span></span>
<span class="line">    <span class="token annotation punctuation">@CallerSensitive</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SecurityException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">checkMemberAccess</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">,</span> <span class="token class-name">Reflection</span><span class="token punctuation">.</span><span class="token function">getCallerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">copyMethods</span><span class="token punctuation">(</span><span class="token function">privateGetPublicMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 获得他的构造器</span></span>
<span class="line">    <span class="token annotation punctuation">@CallerSensitive</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SecurityException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">checkMemberAccess</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">,</span> <span class="token class-name">Reflection</span><span class="token punctuation">.</span><span class="token function">getCallerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">copyConstructors</span><span class="token punctuation">(</span><span class="token function">privateGetDeclaredConstructors</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 获得他的属性</span></span>
<span class="line">    <span class="token annotation punctuation">@CallerSensitive</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Field</span> <span class="token function">getField</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">throws</span> <span class="token class-name">NoSuchFieldException</span><span class="token punctuation">,</span> <span class="token class-name">SecurityException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">checkMemberAccess</span><span class="token punctuation">(</span><span class="token class-name">Member</span><span class="token punctuation">.</span><span class="token constant">PUBLIC</span><span class="token punctuation">,</span> <span class="token class-name">Reflection</span><span class="token punctuation">.</span><span class="token function">getCallerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Field</span> field <span class="token operator">=</span> <span class="token function">getField0</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>field <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchFieldException</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> field<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们已经学过了类的加载过程，这里我们要介绍的是，每一个类加载完成后会在方法区生成一个Class类型的对象，辅助我们访问这个的方法、构造器、字段等。这个对象是Class的子类，每个类【有且仅有】一个Class类，也叫类对象。</p><p><img src="https://www.ydlclass.com/doc21xnv/assets/image-20210912142513858.d3f65cad.png" alt="image-20210912142513858"></p><h3 id="_1、获取类对象的方法" tabindex="-1"><a class="header-anchor" href="#_1、获取类对象的方法"><span>1、获取类对象的方法</span></a></h3><h4 id="_1-获取方式" tabindex="-1"><a class="header-anchor" href="#_1-获取方式"><span>（1）获取方式</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token number">1</span>、使用类</span>
<span class="line"><span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2</span>、使用全类名</span>
<span class="line"><span class="token class-name">Class</span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.ydl.Dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token number">3</span>、使用对象</span>
<span class="line"><span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span> clazz <span class="token operator">=</span> dog<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-对类对象操作" tabindex="-1"><a class="header-anchor" href="#_2-对类对象操作"><span>（2）对类对象操作</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">//获取类名字</span></span>
<span class="line"><span class="token class-name">String</span> name <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//获取类加载器</span></span>
<span class="line"><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//获取资源</span></span>
<span class="line"><span class="token class-name">URL</span> resource <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//得到父类</span></span>
<span class="line"><span class="token class-name">Class</span> superclass <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//判断一个类是不是接口，数组等等</span></span>
<span class="line"><span class="token keyword">boolean</span> array <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">boolean</span> anInterface <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">isInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//重点，使用class对象实例化一个对象</span></span>
<span class="line"><span class="token class-name">Object</span> instance <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、对成员变量的操作" tabindex="-1"><a class="header-anchor" href="#_2、对成员变量的操作"><span>2、对成员变量的操作</span></a></h3><p>在java中万物皆对象成员变量也是对象，他拥有操作一个对象的成员变量的能力。</p><h4 id="_1-获取成员变量" tabindex="-1"><a class="header-anchor" href="#_1-获取成员变量"><span>（1）获取成员变量</span></a></h4><p>getFields只能获取被public修饰的成员变量，当然反射很牛，我们依然可以使用getDeclaredFields方法获取所有的成员变量。</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">//获取字段，只能获取公共的字段（public）</span></span>
<span class="line"><span class="token class-name">Field</span> name <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//能获取所有的字段包括private</span></span>
<span class="line"><span class="token class-name">Field</span> color <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-获取对象的属性" tabindex="-1"><a class="header-anchor" href="#_2-获取对象的属性"><span>（2）获取对象的属性</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dog<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Field</span> color <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然你要是明确类型你还能用以下方法：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Int</span> i <span class="token operator">=</span> age<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getBoolean</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getChar</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//每一种基本类型都有对应方法</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-设置对象的属性" tabindex="-1"><a class="header-anchor" href="#_3-设置对象的属性"><span>（3）设置对象的属性</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dog<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Field</span> color <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然如果你知道对应的类型，我们可以这样：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line">xxx<span class="token punctuation">.</span><span class="token function">setBoolean</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span>dog，<span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token number">1.2F</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">xxx<span class="token punctuation">.</span><span class="token function">getChar</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token char">&#39;A&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//每一种基本类型包装类都有对应方法</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Field</span> color <span class="token operator">=</span> dogClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//暴力注入</span></span>
<span class="line">color<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">color<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、对方法的操作" tabindex="-1"><a class="header-anchor" href="#_3、对方法的操作"><span>3、对方法的操作</span></a></h3><h4 id="_1-获取方法" tabindex="-1"><a class="header-anchor" href="#_1-获取方法"><span>（1）获取方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">//根据名字和参数类型获取一个方法</span></span>
<span class="line"><span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Method</span> eat <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-对方法的操作" tabindex="-1"><a class="header-anchor" href="#_2-对方法的操作"><span>（2）对方法的操作</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">dog<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//获取某个方法，名字，后边是参数类型</span></span>
<span class="line"><span class="token class-name">Method</span> method <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//拿到参数的个数</span></span>
<span class="line"><span class="token keyword">int</span> parameterCount <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//拿到方法的名字</span></span>
<span class="line"><span class="token class-name">String</span> name <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//拿到参数的类型数组</span></span>
<span class="line"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterTypes <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//拿到返回值类型</span></span>
<span class="line"><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> returnType <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//重点。反射调用方法，传一个实例，和参数</span></span>
<span class="line">method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token string">&quot;热狗&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Class</span> dogClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.xinzhi.Dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Object</span> dog <span class="token operator">=</span> dogClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Method</span> eat <span class="token operator">=</span> dogClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">eat<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Method</span> eat2 <span class="token operator">=</span> dogClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">eat2<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token string">&quot;meat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Method</span> eat3 <span class="token operator">=</span> dogClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">eat3<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span><span class="token string">&quot;meat&quot;</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、对构造器的操作" tabindex="-1"><a class="header-anchor" href="#_4、对构造器的操作"><span>4、对构造器的操作</span></a></h3><h4 id="_1-获取并构建对象" tabindex="-1"><a class="header-anchor" href="#_1-获取并构建对象"><span>（1）获取并构建对象</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredConstructors <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Constructor</span> declaredConstructor <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Object</span> obj <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、对注解的操作" tabindex="-1"><a class="header-anchor" href="#_5、对注解的操作"><span>5、对注解的操作</span></a></h3><h4 id="_1-从方法、字段、类上获取注解" tabindex="-1"><a class="header-anchor" href="#_1-从方法、字段、类上获取注解"><span>（1）从方法、字段、类上获取注解</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">//元注解 要加上runtime</span></span>
<span class="line"><span class="token comment">//类上</span></span>
<span class="line"><span class="token class-name">Annotation</span> annotation <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Bean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//字段上</span></span>
<span class="line"><span class="token class-name">Annotation</span> annotation <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Bean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//方法上</span></span>
<span class="line"><span class="token class-name">Annotation</span> annotation <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Bean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、写一个小案例" tabindex="-1"><a class="header-anchor" href="#三、写一个小案例"><span>三、写一个小案例</span></a></h2><p>要求：讲src源文件中加了<code>@Singleton</code>注解的类都在程序启动时以【单例】的形式加载到内存。</p><p>提示：</p><p>1、获取classpath文件的方法：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token class-name">URL</span> resource <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">String</span> file <span class="token operator">=</span> resource<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>2、所有的单例放在一个ConcurrentHashMap当中：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span>  <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerSingleton</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span><span class="token class-name">Object</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>clazz<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span>  <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span>context<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">@Target(ElementType.TYPE)</span>
<span class="line">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="line">public @interface Singleton {</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">public class SingletonHandler {</span>
<span class="line"></span>
<span class="line">    public static void handler(List&lt;String&gt; classNames){</span>
<span class="line">        for (String className : classNames) {</span>
<span class="line">            Class&lt;?&gt; clazz = null;</span>
<span class="line">            try {</span>
<span class="line">                clazz = Class.forName(className);</span>
<span class="line">            } catch (ClassNotFoundException e) {</span>
<span class="line">                e.printStackTrace();</span>
<span class="line">            }</span>
<span class="line">            // 获取注解</span>
<span class="line">            Singleton annotation = clazz.getAnnotation(Singleton.class);</span>
<span class="line">            if(annotation != null){</span>
<span class="line">                Object instance = null;</span>
<span class="line">                try {</span>
<span class="line">                    instance = clazz.newInstance();</span>
<span class="line">                } catch (InstantiationException e) {</span>
<span class="line">                    e.printStackTrace();</span>
<span class="line">                } catch (IllegalAccessException e) {</span>
<span class="line">                    e.printStackTrace();</span>
<span class="line">                }</span>
<span class="line">                ApplicationContext.addSingleton(clazz,instance);</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}public class ApplicationContext {</span>
<span class="line">    // 维护一个上下文环境</span>
<span class="line">    private final static Map&lt;Class&lt;?&gt;,Object&gt; CONTEXT = new ConcurrentHashMap&lt;&gt;(8);</span>
<span class="line"></span>
<span class="line">    public static void addSingleton(Class&lt;?&gt; clazz,Object entity){</span>
<span class="line">        ApplicationContext.CONTEXT.put(clazz,entity);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    // 把实例对象从容器拿出来</span>
<span class="line">    public static  &lt;T&gt; T getSingleton(Class&lt;T&gt; clazz){</span>
<span class="line">        return (T)ApplicationContext.CONTEXT.get(clazz);</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">public class FileUtils {</span>
<span class="line"></span>
<span class="line">    public static List&lt;String&gt; getAllClassName(File file) {</span>
<span class="line">        // 1、自己定义一个集合</span>
<span class="line">        List&lt;String&gt; classPaths = new ArrayList&lt;&gt;();</span>
<span class="line"></span>
<span class="line">        // 2、获取所有的class文件的路径</span>
<span class="line">        findAll(file.getAbsolutePath(),classPaths);</span>
<span class="line">        // D:\code\javase\out\production\annotationAndReflect\com\ydlclass\Dog.class</span>
<span class="line">        // com.ydlclass.Dog   Class.forName()</span>
<span class="line">        // 遍历绝对路径，变成全限定名</span>
<span class="line">        return classPaths.stream().map(path -&gt; {</span>
<span class="line">            String fileName = file.getAbsolutePath();</span>
<span class="line">            // D:\code\javase\out\production\annotationAndReflect\com\ydlclass\Dog.class</span>
<span class="line">            // com\ydlclass\Dog.class</span>
<span class="line">            return path.replace(fileName + &quot;\\&quot;, &quot;&quot;)</span>
<span class="line">                    .replaceAll(&quot;\\\\&quot;,&quot;.&quot;)</span>
<span class="line">                    .replace(&quot;.class&quot;,&quot;&quot;);</span>
<span class="line">        }).collect(Collectors.toList());</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    private static void findAll(String path,List&lt;String&gt; classPathList) {</span>
<span class="line">        // 1、尝试列出当前文件夹的文件</span>
<span class="line">        File file = new File(path);</span>
<span class="line">        // 2、过滤文件  文件夹和png</span>
<span class="line">        File[] list = file.listFiles((f, n) -&gt; new File(f, n).isDirectory() || n.contains(&quot;.class&quot;));</span>
<span class="line"></span>
<span class="line">        if (list == null || list.length == 0) {</span>
<span class="line">            return;</span>
<span class="line">        }</span>
<span class="line">        for (File parent : list) {</span>
<span class="line">            // 看看是不是一个文件夹，如果是</span>
<span class="line">            if (parent.isDirectory()) {</span>
<span class="line">                // 递归</span>
<span class="line">                findAll(parent.getAbsolutePath(),classPathList);</span>
<span class="line">            } else {</span>
<span class="line">                // 如果不是</span>
<span class="line">                classPathList.add(parent.getAbsolutePath());</span>
<span class="line">            }</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bootstrap</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 类加载之后就会处理</span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取classpath根路径</span></span>
<span class="line">        <span class="token keyword">final</span> <span class="token class-name">URL</span> resource <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 一句话获取权限名称</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> classNames <span class="token operator">=</span> <span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">getAllClassName</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 处理对应的全限定名称</span></span>
<span class="line">        <span class="token class-name">SingletonHandler</span><span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">(</span>classNames<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Dog</span> singleton <span class="token operator">=</span> <span class="token class-name">ApplicationContext</span><span class="token punctuation">.</span><span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/JavaSE2/iostream.html" aria-label="14.IO流"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>14.IO流</span></div></a><a class="route-link auto-link next" href="/JavaSE2/socket.html" aria-label="16.socket网络编程"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>16.socket网络编程</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CiSBoDQ3.js" defer></script>
  </body>
</html>
